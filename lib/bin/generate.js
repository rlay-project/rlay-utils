#!/usr/bin/env node
"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var fs=_interopDefault(require("fs")),constants=_interopDefault(require("constants")),stream=_interopDefault(require("stream")),util=_interopDefault(require("util")),assert=_interopDefault(require("assert")),path=_interopDefault(require("path")),os=_interopDefault(require("os"));function createCommonjsModule(e,r){return e(r={exports:{}},r.exports),r.exports}var fromCallback=function(e){return Object.defineProperty(function(){if("function"!=typeof arguments[arguments.length-1])return new Promise((r,t)=>{arguments[arguments.length]=((e,i)=>{if(e)return t(e);r(i)}),arguments.length++,e.apply(this,arguments)});e.apply(this,arguments)},"name",{value:e.name})},fromPromise=function(e){return Object.defineProperty(function(){const r=arguments[arguments.length-1];if("function"!=typeof r)return e.apply(this,arguments);e.apply(this,arguments).then(e=>r(null,e),r)},"name",{value:e.name})},universalify={fromCallback:fromCallback,fromPromise:fromPromise},universalify$1=Object.freeze({default:universalify,__moduleExports:universalify,fromCallback:fromCallback,fromPromise:fromPromise}),fs_1=clone(fs);function clone(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Object)var r={__proto__:e.__proto__};else r=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}),r}var fs$1=Object.freeze({default:fs_1,__moduleExports:fs_1}),fs$2=fs$1&&fs_1||fs$1,origCwd=process.cwd,cwd=null,platform=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return cwd||(cwd=origCwd.call(process)),cwd};try{process.cwd()}catch(e){}var chdir=process.chdir;process.chdir=function(e){cwd=null,chdir.call(process,e)};var polyfills=patch;function patch(e){var r,t,i;constants.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&patchLchmod(e),e.lutimes||patchLutimes(e),e.chown=chownFix(e.chown),e.fchown=chownFix(e.fchown),e.lchown=chownFix(e.lchown),e.chmod=chmodFix(e.chmod),e.fchmod=chmodFix(e.fchmod),e.lchmod=chmodFix(e.lchmod),e.chownSync=chownFixSync(e.chownSync),e.fchownSync=chownFixSync(e.fchownSync),e.lchownSync=chownFixSync(e.lchownSync),e.chmodSync=chmodFixSync(e.chmodSync),e.fchmodSync=chmodFixSync(e.fchmodSync),e.lchmodSync=chmodFixSync(e.lchmodSync),e.stat=statFix(e.stat),e.fstat=statFix(e.fstat),e.lstat=statFix(e.lstat),e.statSync=statFixSync(e.statSync),e.fstatSync=statFixSync(e.fstatSync),e.lstatSync=statFixSync(e.lstatSync),e.lchmod||(e.lchmod=function(e,r,t){t&&process.nextTick(t)},e.lchmodSync=function(){}),e.lchown||(e.lchown=function(e,r,t,i){i&&process.nextTick(i)},e.lchownSync=function(){}),"win32"===platform&&(e.rename=(r=e.rename,function(t,i,n){var s=Date.now(),o=0;r(t,i,function c(a){if(a&&("EACCES"===a.code||"EPERM"===a.code)&&6e4>Date.now()-s)return setTimeout(function(){e.stat(i,function(e,s){e&&"ENOENT"===e.code?r(t,i,c):n(a)})},o),void(100>o&&(o+=10));n&&n(a)})})),e.read=(t=e.read,function(r,i,n,s,o,c){var a;if(c&&"function"==typeof c){var u=0;a=function(l,y,$){if(l&&"EAGAIN"===l.code&&10>u)return u++,t.call(e,r,i,n,s,o,a);c.apply(this,arguments)}}return t.call(e,r,i,n,s,o,a)}),e.readSync=(i=e.readSync,function(r,t,n,s,o){for(var c=0;;)try{return i.call(e,r,t,n,s,o)}catch(e){if("EAGAIN"===e.code&&10>c){c++;continue}throw e}})}function patchLchmod(e){e.lchmod=function(r,t,i){e.open(r,constants.O_WRONLY|constants.O_SYMLINK,t,function(r,n){r?i&&i(r):e.fchmod(n,t,function(r){e.close(n,function(e){i&&i(r||e)})})})},e.lchmodSync=function(r,t){var i,n=e.openSync(r,constants.O_WRONLY|constants.O_SYMLINK,t),s=!0;try{i=e.fchmodSync(n,t),s=!1}finally{if(s)try{e.closeSync(n)}catch(e){}else e.closeSync(n)}return i}}function patchLutimes(e){constants.hasOwnProperty("O_SYMLINK")?(e.lutimes=function(r,t,i,n){e.open(r,constants.O_SYMLINK,function(r,s){r?n&&n(r):e.futimes(s,t,i,function(r){e.close(s,function(e){n&&n(r||e)})})})},e.lutimesSync=function(r,t,i){var n,s=e.openSync(r,constants.O_SYMLINK),o=!0;try{n=e.futimesSync(s,t,i),o=!1}finally{if(o)try{e.closeSync(s)}catch(e){}else e.closeSync(s)}return n}):(e.lutimes=function(e,r,t,i){i&&process.nextTick(i)},e.lutimesSync=function(){})}function chmodFix(e){return e?function(r,t,i){return e.call(fs$2,r,t,function(e){chownErOk(e)&&(e=null),i&&i.apply(this,arguments)})}:e}function chmodFixSync(e){return e?function(r,t){try{return e.call(fs$2,r,t)}catch(e){if(!chownErOk(e))throw e}}:e}function chownFix(e){return e?function(r,t,i,n){return e.call(fs$2,r,t,i,function(e){chownErOk(e)&&(e=null),n&&n.apply(this,arguments)})}:e}function chownFixSync(e){return e?function(r,t,i){try{return e.call(fs$2,r,t,i)}catch(e){if(!chownErOk(e))throw e}}:e}function statFix(e){return e?function(r,t){return e.call(fs$2,r,function(e,r){if(!r)return t.apply(this,arguments);0>r.uid&&(r.uid+=4294967296),0>r.gid&&(r.gid+=4294967296),t&&t.apply(this,arguments)})}:e}function statFixSync(e){return e?function(r){var t=e.call(fs$2,r);return 0>t.uid&&(t.uid+=4294967296),0>t.gid&&(t.gid+=4294967296),t}:e}function chownErOk(e){return!e||("ENOSYS"===e.code||!(process.getuid&&0===process.getuid()||"EINVAL"!==e.code&&"EPERM"!==e.code))}var polyfills$1=Object.freeze({default:polyfills,__moduleExports:polyfills}),Stream=stream.Stream,legacyStreams=legacy;function legacy(e){return{ReadStream:function r(t,i){if(!(this instanceof r))return new r(t,i);Stream.call(this);var n=this;this.path=t;this.fd=null;this.readable=!0;this.paused=!1;this.flags="r";this.mode=438;this.bufferSize=65536;i=i||{};var s=Object.keys(i);for(var o=0,c=s.length;c>o;o++){var a=s[o];this[a]=i[a]}this.encoding&&this.setEncoding(this.encoding);if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw Error("start must be <= end");this.pos=this.start}if(null!==this.fd)return void process.nextTick(function(){n._read()});e.open(this.path,this.flags,this.mode,function(e,r){if(e)return n.emit("error",e),void(n.readable=!1);n.fd=r,n.emit("open",r),n._read()})},WriteStream:function r(t,i){if(!(this instanceof r))return new r(t,i);Stream.call(this);this.path=t;this.fd=null;this.writable=!0;this.flags="w";this.encoding="binary";this.mode=438;this.bytesWritten=0;i=i||{};var n=Object.keys(i);for(var s=0,o=n.length;o>s;s++){var c=n[s];this[c]=i[c]}if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(0>this.start)throw Error("start must be >= zero");this.pos=this.start}this.busy=!1;this._queue=[];null===this.fd&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}}var legacyStreams$1=Object.freeze({default:legacyStreams,__moduleExports:legacyStreams}),polyfills$2=polyfills$1&&polyfills||polyfills$1,legacy$1=legacyStreams$1&&legacyStreams||legacyStreams$1,gracefulFs=createCommonjsModule(function(e){var r=[];var t,i,n=function(){};function s(e){polyfills$2(e),e.gracefulify=s,e.FileReadStream=$,e.FileWriteStream=f,e.createReadStream=function(e,r){return new $(e,r)},e.createWriteStream=function(e,r){return new f(e,r)};var r=e.readFile;e.readFile=function(e,t,i){"function"==typeof t&&(i=t,t=null);return function e(t,i,n){return r(t,i,function(r){!r||"EMFILE"!==r.code&&"ENFILE"!==r.code?("function"==typeof n&&n.apply(this,arguments),c()):o([e,[t,i,n]])})}(e,t,i)};var t=e.writeFile;e.writeFile=function(e,r,i,n){"function"==typeof i&&(n=i,i=null);return function e(r,i,n,s){return t(r,i,n,function(t){!t||"EMFILE"!==t.code&&"ENFILE"!==t.code?("function"==typeof s&&s.apply(this,arguments),c()):o([e,[r,i,n,s]])})}(e,r,i,n)};var i=e.appendFile;i&&(e.appendFile=function(e,r,t,n){"function"==typeof t&&(n=t,t=null);return function e(r,t,n,s){return i(r,t,n,function(i){!i||"EMFILE"!==i.code&&"ENFILE"!==i.code?("function"==typeof s&&s.apply(this,arguments),c()):o([e,[r,t,n,s]])})}(e,r,t,n)});var n=e.readdir;function a(r){return n.apply(e,r)}if(e.readdir=function(e,r,t){var i=[e];"function"!=typeof r?i.push(r):t=r;return i.push(function(e,r){r&&r.sort&&r.sort(),!e||"EMFILE"!==e.code&&"ENFILE"!==e.code?("function"==typeof t&&t.apply(this,arguments),c()):o([a,[i]])}),a(i)},"v0.8"===process.version.substr(0,4)){var u=legacy$1(e);$=u.ReadStream,f=u.WriteStream}var l=e.ReadStream;$.prototype=Object.create(l.prototype),$.prototype.open=function(){var e=this;p(e.path,e.flags,e.mode,function(r,t){r?(e.autoClose&&e.destroy(),e.emit("error",r)):(e.fd=t,e.emit("open",t),e.read())})};var y=e.WriteStream;function $(e,r){return this instanceof $?(l.apply(this,arguments),this):$.apply(Object.create($.prototype),arguments)}function f(e,r){return this instanceof f?(y.apply(this,arguments),this):f.apply(Object.create(f.prototype),arguments)}f.prototype=Object.create(y.prototype),f.prototype.open=function(){var e=this;p(e.path,e.flags,e.mode,function(r,t){r?(e.destroy(),e.emit("error",r)):(e.fd=t,e.emit("open",t))})},e.ReadStream=$,e.WriteStream=f;var m=e.open;function p(e,r,t,i){return"function"==typeof t&&(i=t,t=null),function e(r,t,i,n){return m(r,t,i,function(s,a){!s||"EMFILE"!==s.code&&"ENFILE"!==s.code?("function"==typeof n&&n.apply(this,arguments),c()):o([e,[r,t,i,n]])})}(e,r,t,i)}return e.open=p,e}function o(e){n("ENQUEUE",e[0].name,e[1]),r.push(e)}function c(){var e=r.shift();e&&(n("RETRY",e[0].name,e[1]),e[0].apply(null,e[1]))}util.debuglog?n=util.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(n=function(){var e=util.format.apply(util,arguments);e="GFS4: "+e.split(/\n/).join("\nGFS4: "),console.error(e)}),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){n(r),assert.equal(r.length,0)}),e.exports=s(fs$2),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&(e.exports=s(fs)),e.exports.close=fs.close=(t=fs.close,function(e,r){return t.call(fs,e,function(e){e||c(),"function"==typeof r&&r.apply(this,arguments)})}),e.exports.closeSync=fs.closeSync=(i=fs.closeSync,function(e){var r=i.apply(fs,arguments);return c(),r})}),gracefulFs_1=gracefulFs.close,gracefulFs_2=gracefulFs.closeSync,gracefulFs$1=Object.freeze({default:gracefulFs,__moduleExports:gracefulFs,close:gracefulFs_1,closeSync:gracefulFs_2}),require$$0=universalify$1&&universalify||universalify$1,require$$0$1=gracefulFs$1&&gracefulFs||gracefulFs$1,fs_1$1=createCommonjsModule(function(e,r){const t=require$$0.fromCallback,i=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchown","lchmod","link","lstat","mkdir","mkdtemp","open","readFile","readdir","readlink","realpath","rename","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(e=>"function"==typeof require$$0$1[e]);Object.keys(require$$0$1).forEach(e=>{"promises"!==e&&(r[e]=require$$0$1[e])}),i.forEach(e=>{r[e]=t(require$$0$1[e])}),r.exists=function(e,r){return"function"==typeof r?require$$0$1.exists(e,r):new Promise(r=>require$$0$1.exists(e,r))},r.read=function(e,r,t,i,n,s){return"function"==typeof s?require$$0$1.read(e,r,t,i,n,s):new Promise((s,o)=>{require$$0$1.read(e,r,t,i,n,(e,r,t)=>{if(e)return o(e);s({bytesRead:r,buffer:t})})})},r.write=function(e,r,...t){return"function"==typeof t[t.length-1]?require$$0$1.write(e,r,...t):new Promise((i,n)=>{require$$0$1.write(e,r,...t,(e,r,t)=>{if(e)return n(e);i({bytesWritten:r,buffer:t})})})}}),fs_2=fs_1$1.exists,fs_3=fs_1$1.read,fs_4=fs_1$1.write,fs$3=Object.freeze({default:fs_1$1,__moduleExports:fs_1$1,exists:fs_2,read:fs_3,write:fs_4});function getRootPath(e){return(e=path.normalize(path.resolve(e)).split(path.sep)).length>0?e[0]:null}const INVALID_PATH_CHARS=/[<>:"|?*]/;function invalidWin32Path(e){const r=getRootPath(e);return e=e.replace(r,""),INVALID_PATH_CHARS.test(e)}var win32={getRootPath:getRootPath,invalidWin32Path:invalidWin32Path},win32_1=win32.getRootPath,win32_2=win32.invalidWin32Path,win32$1=Object.freeze({default:win32,__moduleExports:win32,getRootPath:win32_1,invalidWin32Path:win32_2}),require$$0$2=win32$1&&win32||win32$1;const invalidWin32Path$1=require$$0$2.invalidWin32Path,o777=parseInt("0777",8);function mkdirs(e,r,t,i){if("function"==typeof r?(t=r,r={}):r&&"object"==typeof r||(r={mode:r}),"win32"===process.platform&&invalidWin32Path$1(e)){const r=Error(e+" contains invalid WIN32 path characters.");return r.code="EINVAL",t(r)}let n=r.mode;const s=r.fs||require$$0$1;void 0===n&&(n=o777&~process.umask()),i||(i=null),t=t||function(){},e=path.resolve(e),s.mkdir(e,n,n=>{if(!n)return t(null,i=i||e);switch(n.code){case"ENOENT":if(path.dirname(e)===e)return t(n);mkdirs(path.dirname(e),r,(i,n)=>{i?t(i,n):mkdirs(e,r,t,n)});break;default:s.stat(e,(e,r)=>{e||!r.isDirectory()?t(n,i):t(null,i)})}})}var mkdirs_1=mkdirs,mkdirs$1=Object.freeze({default:mkdirs_1,__moduleExports:mkdirs_1});const invalidWin32Path$2=require$$0$2.invalidWin32Path,o777$1=parseInt("0777",8);function mkdirsSync(e,r,t){r&&"object"==typeof r||(r={mode:r});let i=r.mode;const n=r.fs||require$$0$1;if("win32"===process.platform&&invalidWin32Path$2(e)){const r=Error(e+" contains invalid WIN32 path characters.");throw r.code="EINVAL",r}void 0===i&&(i=o777$1&~process.umask()),t||(t=null),e=path.resolve(e);try{n.mkdirSync(e,i),t=t||e}catch(i){if("ENOENT"===i.code){if(path.dirname(e)===e)throw i;mkdirsSync(e,r,t=mkdirsSync(path.dirname(e),r,t))}else{let r;try{r=n.statSync(e)}catch(e){throw i}if(!r.isDirectory())throw i}}return t}var mkdirsSync_1=mkdirsSync,mkdirsSync$1=Object.freeze({default:mkdirsSync_1,__moduleExports:mkdirsSync_1}),require$$1=mkdirs$1&&mkdirs_1||mkdirs$1,mkdirsSync$2=mkdirsSync$1&&mkdirsSync_1||mkdirsSync$1;const u=require$$0.fromCallback,mkdirs$2=u(require$$1);var mkdirs_1$1={mkdirs:mkdirs$2,mkdirsSync:mkdirsSync$2,mkdirp:mkdirs$2,mkdirpSync:mkdirsSync$2,ensureDir:mkdirs$2,ensureDirSync:mkdirsSync$2},mkdirs_2=mkdirs_1$1.mkdirs,mkdirs_3=mkdirs_1$1.mkdirsSync,mkdirs_4=mkdirs_1$1.mkdirp,mkdirs_5=mkdirs_1$1.mkdirpSync,mkdirs_6=mkdirs_1$1.ensureDir,mkdirs_7=mkdirs_1$1.ensureDirSync,mkdirs$3=Object.freeze({default:mkdirs_1$1,__moduleExports:mkdirs_1$1,mkdirs:mkdirs_2,mkdirsSync:mkdirs_3,mkdirp:mkdirs_4,mkdirpSync:mkdirs_5,ensureDir:mkdirs_6,ensureDirSync:mkdirs_7});function hasMillisResSync(){let e=path.join("millis-test-sync"+Date.now()+(""+Math.random()).slice(2));e=path.join(os.tmpdir(),e);const r=new Date(1435410243862);require$$0$1.writeFileSync(e,"https://github.com/jprichardson/node-fs-extra/pull/141");const t=require$$0$1.openSync(e,"r+");return require$$0$1.futimesSync(t,r,r),require$$0$1.closeSync(t),require$$0$1.statSync(e).mtime>1435410243e3}function hasMillisRes(e){let r=path.join("millis-test"+Date.now()+(""+Math.random()).slice(2));r=path.join(os.tmpdir(),r);const t=new Date(1435410243862);require$$0$1.writeFile(r,"https://github.com/jprichardson/node-fs-extra/pull/141",i=>{if(i)return e(i);require$$0$1.open(r,"r+",(i,n)=>{if(i)return e(i);require$$0$1.futimes(n,t,t,t=>{if(t)return e(t);require$$0$1.close(n,t=>{if(t)return e(t);require$$0$1.stat(r,(r,t)=>{if(r)return e(r);e(null,t.mtime>1435410243e3)})})})})})}function timeRemoveMillis(e){if("number"==typeof e)return 1e3*Math.floor(e/1e3);if(e instanceof Date)return new Date(1e3*Math.floor(e.getTime()/1e3));throw Error("fs-extra: timeRemoveMillis() unknown parameter type")}function utimesMillis(e,r,t,i){require$$0$1.open(e,"r+",(e,n)=>{if(e)return i(e);require$$0$1.futimes(n,r,t,e=>{require$$0$1.close(n,r=>{i&&i(e||r)})})})}function utimesMillisSync(e,r,t){const i=require$$0$1.openSync(e,"r+");return require$$0$1.futimesSync(i,r,t),require$$0$1.closeSync(i)}var utimes={hasMillisRes:hasMillisRes,hasMillisResSync:hasMillisResSync,timeRemoveMillis:timeRemoveMillis,utimesMillis:utimesMillis,utimesMillisSync:utimesMillisSync},utimes_1=utimes.hasMillisRes,utimes_2=utimes.hasMillisResSync,utimes_3=utimes.timeRemoveMillis,utimes_4=utimes.utimesMillis,utimes_5=utimes.utimesMillisSync,utimes$1=Object.freeze({default:utimes,__moduleExports:utimes,hasMillisRes:utimes_1,hasMillisResSync:utimes_2,timeRemoveMillis:utimes_3,utimesMillis:utimes_4,utimesMillisSync:utimes_5}),buffer=function(e){if("function"==typeof Buffer.allocUnsafe)try{return Buffer.allocUnsafe(e)}catch(r){return new Buffer(e)}return new Buffer(e)},buffer$1=Object.freeze({default:buffer,__moduleExports:buffer}),mkdir=mkdirs$3&&mkdirs_1$1||mkdirs$3,require$$2=utimes$1&&utimes||utimes$1,require$$2$1=buffer$1&&buffer||buffer$1;const mkdirpSync=mkdir.mkdirsSync,utimesSync=require$$2.utimesMillisSync,notExist=Symbol();function copySync(e,r,t){"function"==typeof t&&(t={filter:t}),(t=t||{}).clobber=!("clobber"in t)||!!t.clobber,t.overwrite="overwrite"in t?!!t.overwrite:t.clobber,t.preserveTimestamps&&"ia32"===process.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269");const i=checkPaths(e,r);if(t.filter&&!t.filter(e,r))return;const n=path.dirname(r);return require$$0$1.existsSync(n)||mkdirpSync(n),startCopy(i,e,r,t)}function startCopy(e,r,t,i){if(!i.filter||i.filter(r,t))return getStats(e,r,t,i)}function getStats(e,r,t,i){const n=(i.dereference?require$$0$1.statSync:require$$0$1.lstatSync)(r);return n.isDirectory()?onDir(n,e,r,t,i):n.isFile()||n.isCharacterDevice()||n.isBlockDevice()?onFile(n,e,r,t,i):n.isSymbolicLink()?onLink(e,r,t,i):void 0}function onFile(e,r,t,i,n){return r===notExist?copyFile(e,t,i,n):mayCopyFile(e,t,i,n)}function mayCopyFile(e,r,t,i){if(i.overwrite)return require$$0$1.unlinkSync(t),copyFile(e,r,t,i);if(i.errorOnExist)throw Error(`'${t}' already exists`)}function copyFile(e,r,t,i){return"function"==typeof require$$0$1.copyFileSync?(require$$0$1.copyFileSync(r,t),require$$0$1.chmodSync(t,e.mode),i.preserveTimestamps?utimesSync(t,e.atime,e.mtime):void 0):copyFileFallback(e,r,t,i)}function copyFileFallback(e,r,t,i){const n=require$$2$1(65536),s=require$$0$1.openSync(r,"r"),o=require$$0$1.openSync(t,"w",e.mode);let c=0;for(;e.size>c;){const e=require$$0$1.readSync(s,n,0,65536,c);require$$0$1.writeSync(o,n,0,e),c+=e}i.preserveTimestamps&&require$$0$1.futimesSync(o,e.atime,e.mtime),require$$0$1.closeSync(s),require$$0$1.closeSync(o)}function onDir(e,r,t,i,n){if(r===notExist)return mkDirAndCopy(e,t,i,n);if(r&&!r.isDirectory())throw Error(`Cannot overwrite non-directory '${i}' with directory '${t}'.`);return copyDir(t,i,n)}function mkDirAndCopy(e,r,t,i){return require$$0$1.mkdirSync(t),copyDir(r,t,i),require$$0$1.chmodSync(t,e.mode)}function copyDir(e,r,t){require$$0$1.readdirSync(e).forEach(i=>copyDirItem(i,e,r,t))}function copyDirItem(e,r,t,i){const n=path.join(r,e),s=path.join(t,e);return startCopy(checkPaths(n,s),n,s,i)}function onLink(e,r,t,i){let n=require$$0$1.readlinkSync(r);if(i.dereference&&(n=path.resolve(process.cwd(),n)),e===notExist)return require$$0$1.symlinkSync(n,t);{let e;try{e=require$$0$1.readlinkSync(t)}catch(e){if("EINVAL"===e.code||"UNKNOWN"===e.code)return require$$0$1.symlinkSync(n,t);throw e}if(i.dereference&&(e=path.resolve(process.cwd(),e)),isSrcSubdir(n,e))throw Error(`Cannot copy '${n}' to a subdirectory of itself, '${e}'.`);if(require$$0$1.statSync(t).isDirectory()&&isSrcSubdir(e,n))throw Error(`Cannot overwrite '${e}' with '${n}'.`);return copyLink(n,t)}}function copyLink(e,r){return require$$0$1.unlinkSync(r),require$$0$1.symlinkSync(e,r)}function isSrcSubdir(e,r){const t=path.resolve(e).split(path.sep),i=path.resolve(r).split(path.sep);return t.reduce((e,r,t)=>e&&i[t]===r,!0)}function checkStats(e,r){const t=require$$0$1.statSync(e);let i;try{i=require$$0$1.statSync(r)}catch(e){if("ENOENT"===e.code)return{srcStat:t,destStat:notExist};throw e}return{srcStat:t,destStat:i}}function checkPaths(e,r){const{srcStat:t,destStat:i}=checkStats(e,r);if(i.ino&&i.ino===t.ino)throw Error("Source and destination must not be the same.");if(t.isDirectory()&&isSrcSubdir(e,r))throw Error(`Cannot copy '${e}' to a subdirectory of itself, '${r}'.`);return i}var copySync_1=copySync,copySync$1=Object.freeze({default:copySync_1,__moduleExports:copySync_1}),require$$0$3=copySync$1&&copySync_1||copySync$1,copySync$2={copySync:require$$0$3},copySync_1$1=copySync$2.copySync,copySync$3=Object.freeze({default:copySync$2,__moduleExports:copySync$2,copySync:copySync_1$1}),fs$4=fs$3&&fs_1$1||fs$3;const u$1=require$$0.fromPromise;function pathExists(e){return fs$4.access(e).then(()=>!0).catch(()=>!1)}var pathExists_1={pathExists:u$1(pathExists),pathExistsSync:fs$4.existsSync},pathExists_2=pathExists_1.pathExists,pathExists_3=pathExists_1.pathExistsSync,pathExists$1=Object.freeze({default:pathExists_1,__moduleExports:pathExists_1,pathExists:pathExists_2,pathExistsSync:pathExists_3}),require$$0$4=pathExists$1&&pathExists_1||pathExists$1;const mkdirp=mkdir.mkdirs,pathExists$2=require$$0$4.pathExists,utimes$2=require$$2.utimesMillis,notExist$1=Symbol();function copy(e,r,t,i){"function"!=typeof t||i?"function"==typeof t&&(t={filter:t}):(i=t,t={}),i=i||function(){},(t=t||{}).clobber=!("clobber"in t)||!!t.clobber,t.overwrite="overwrite"in t?!!t.overwrite:t.clobber,t.preserveTimestamps&&"ia32"===process.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269"),checkPaths$1(e,r,(n,s)=>n?i(n):t.filter?handleFilter(checkParentDir,s,e,r,t,i):checkParentDir(s,e,r,t,i))}function checkParentDir(e,r,t,i,n){const s=path.dirname(t);pathExists$2(s,(o,c)=>o?n(o):c?startCopy$1(e,r,t,i,n):void mkdirp(s,s=>s?n(s):startCopy$1(e,r,t,i,n)))}function handleFilter(e,r,t,i,n,s){Promise.resolve(n.filter(t,i)).then(o=>o?r?e(r,t,i,n,s):e(t,i,n,s):s(),e=>s(e))}function startCopy$1(e,r,t,i,n){return i.filter?handleFilter(getStats$1,e,r,t,i,n):getStats$1(e,r,t,i,n)}function getStats$1(e,r,t,i,n){(i.dereference?require$$0$1.stat:require$$0$1.lstat)(r,(s,o)=>s?n(s):o.isDirectory()?onDir$1(o,e,r,t,i,n):o.isFile()||o.isCharacterDevice()||o.isBlockDevice()?onFile$1(o,e,r,t,i,n):o.isSymbolicLink()?onLink$1(e,r,t,i,n):void 0)}function onFile$1(e,r,t,i,n,s){return r===notExist$1?copyFile$1(e,t,i,n,s):mayCopyFile$1(e,t,i,n,s)}function mayCopyFile$1(e,r,t,i,n){if(!i.overwrite)return i.errorOnExist?n(Error(`'${t}' already exists`)):n();require$$0$1.unlink(t,s=>s?n(s):copyFile$1(e,r,t,i,n))}function copyFile$1(e,r,t,i,n){return"function"==typeof require$$0$1.copyFile?require$$0$1.copyFile(r,t,r=>r?n(r):setDestModeAndTimestamps(e,t,i,n)):copyFileFallback$1(e,r,t,i,n)}function copyFileFallback$1(e,r,t,i,n){const s=require$$0$1.createReadStream(r);s.on("error",e=>n(e)).once("open",()=>{const r=require$$0$1.createWriteStream(t,{mode:e.mode});r.on("error",e=>n(e)).on("open",()=>s.pipe(r)).once("close",()=>setDestModeAndTimestamps(e,t,i,n))})}function setDestModeAndTimestamps(e,r,t,i){require$$0$1.chmod(r,e.mode,n=>n?i(n):t.preserveTimestamps?utimes$2(r,e.atime,e.mtime,i):i())}function onDir$1(e,r,t,i,n,s){return r===notExist$1?mkDirAndCopy$1(e,t,i,n,s):r&&!r.isDirectory()?s(Error(`Cannot overwrite non-directory '${i}' with directory '${t}'.`)):copyDir$1(t,i,n,s)}function mkDirAndCopy$1(e,r,t,i,n){require$$0$1.mkdir(t,s=>{if(s)return n(s);copyDir$1(r,t,i,r=>r?n(r):require$$0$1.chmod(t,e.mode,n))})}function copyDir$1(e,r,t,i){require$$0$1.readdir(e,(n,s)=>n?i(n):copyDirItems(s,e,r,t,i))}function copyDirItems(e,r,t,i,n){const s=e.pop();return s?copyDirItem$1(e,s,r,t,i,n):n()}function copyDirItem$1(e,r,t,i,n,s){const o=path.join(t,r),c=path.join(i,r);checkPaths$1(o,c,(r,a)=>{if(r)return s(r);startCopy$1(a,o,c,n,r=>r?s(r):copyDirItems(e,t,i,n,s))})}function onLink$1(e,r,t,i,n){require$$0$1.readlink(r,(r,s)=>r?n(r):(i.dereference&&(s=path.resolve(process.cwd(),s)),e===notExist$1?require$$0$1.symlink(s,t,n):void require$$0$1.readlink(t,(r,o)=>r?"EINVAL"===r.code||"UNKNOWN"===r.code?require$$0$1.symlink(s,t,n):n(r):(i.dereference&&(o=path.resolve(process.cwd(),o)),isSrcSubdir$1(s,o)?n(Error(`Cannot copy '${s}' to a subdirectory of itself, '${o}'.`)):e.isDirectory()&&isSrcSubdir$1(o,s)?n(Error(`Cannot overwrite '${o}' with '${s}'.`)):copyLink$1(s,t,n)))))}function copyLink$1(e,r,t){require$$0$1.unlink(r,i=>i?t(i):require$$0$1.symlink(e,r,t))}function isSrcSubdir$1(e,r){const t=path.resolve(e).split(path.sep),i=path.resolve(r).split(path.sep);return t.reduce((e,r,t)=>e&&i[t]===r,!0)}function checkStats$1(e,r,t){require$$0$1.stat(e,(e,i)=>{if(e)return t(e);require$$0$1.stat(r,(e,r)=>e?"ENOENT"===e.code?t(null,{srcStat:i,destStat:notExist$1}):t(e):t(null,{srcStat:i,destStat:r}))})}function checkPaths$1(e,r,t){checkStats$1(e,r,(i,n)=>{if(i)return t(i);const{srcStat:s,destStat:o}=n;return o.ino&&o.ino===s.ino?t(Error("Source and destination must not be the same.")):s.isDirectory()&&isSrcSubdir$1(e,r)?t(Error(`Cannot copy '${e}' to a subdirectory of itself, '${r}'.`)):t(null,o)})}var copy_1=copy,copy$1=Object.freeze({default:copy_1,__moduleExports:copy_1}),require$$1$1=copy$1&&copy_1||copy$1;const u$2=require$$0.fromCallback;var copy$2={copy:u$2(require$$1$1)},copy_1$1=copy$2.copy,copy$3=Object.freeze({default:copy$2,__moduleExports:copy$2,copy:copy_1$1});const isWindows="win32"===process.platform;function defaults(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(r=>{e[r]=e[r]||require$$0$1[r],e[r+="Sync"]=e[r]||require$$0$1[r]}),e.maxBusyTries=e.maxBusyTries||3}function rimraf(e,r,t){let i=0;"function"==typeof r&&(t=r,r={}),assert(e,"rimraf: missing path"),assert.strictEqual(typeof e,"string","rimraf: path should be a string"),assert.strictEqual(typeof t,"function","rimraf: callback function required"),assert(r,"rimraf: invalid options argument provided"),assert.strictEqual(typeof r,"object","rimraf: options should be object"),defaults(r),rimraf_(e,r,function n(s){if(s){if(("EBUSY"===s.code||"ENOTEMPTY"===s.code||"EPERM"===s.code)&&r.maxBusyTries>i){return setTimeout(()=>rimraf_(e,r,n),100*++i)}"ENOENT"===s.code&&(s=null)}t(s)})}function rimraf_(e,r,t){assert(e),assert(r),assert("function"==typeof t),r.lstat(e,(i,n)=>i&&"ENOENT"===i.code?t(null):i&&"EPERM"===i.code&&isWindows?fixWinEPERM(e,r,i,t):n&&n.isDirectory()?rmdir(e,r,i,t):void r.unlink(e,i=>{if(i){if("ENOENT"===i.code)return t(null);if("EPERM"===i.code)return isWindows?fixWinEPERM(e,r,i,t):rmdir(e,r,i,t);if("EISDIR"===i.code)return rmdir(e,r,i,t)}return t(i)}))}function fixWinEPERM(e,r,t,i){assert(e),assert(r),assert("function"==typeof i),t&&assert(t instanceof Error),r.chmod(e,438,n=>{n?i("ENOENT"===n.code?null:t):r.stat(e,(n,s)=>{n?i("ENOENT"===n.code?null:t):s.isDirectory()?rmdir(e,r,t,i):r.unlink(e,i)})})}function fixWinEPERMSync(e,r,t){let i;assert(e),assert(r),t&&assert(t instanceof Error);try{r.chmodSync(e,438)}catch(e){if("ENOENT"===e.code)return;throw t}try{i=r.statSync(e)}catch(e){if("ENOENT"===e.code)return;throw t}i.isDirectory()?rmdirSync(e,r,t):r.unlinkSync(e)}function rmdir(e,r,t,i){assert(e),assert(r),t&&assert(t instanceof Error),assert("function"==typeof i),r.rmdir(e,n=>{!n||"ENOTEMPTY"!==n.code&&"EEXIST"!==n.code&&"EPERM"!==n.code?i(n&&"ENOTDIR"===n.code?t:n):rmkids(e,r,i)})}function rmkids(e,r,t){assert(e),assert(r),assert("function"==typeof t),r.readdir(e,(i,n)=>{if(i)return t(i);let s,o=n.length;if(0===o)return r.rmdir(e,t);n.forEach(i=>{rimraf(path.join(e,i),r,i=>{if(!s)return i?t(s=i):void(0==--o&&r.rmdir(e,t))})})})}function rimrafSync(e,r){let t;defaults(r=r||{}),assert(e,"rimraf: missing path"),assert.strictEqual(typeof e,"string","rimraf: path should be a string"),assert(r,"rimraf: missing options"),assert.strictEqual(typeof r,"object","rimraf: options should be object");try{t=r.lstatSync(e)}catch(t){if("ENOENT"===t.code)return;"EPERM"===t.code&&isWindows&&fixWinEPERMSync(e,r,t)}try{t&&t.isDirectory()?rmdirSync(e,r,null):r.unlinkSync(e)}catch(t){if("ENOENT"===t.code)return;if("EPERM"===t.code)return isWindows?fixWinEPERMSync(e,r,t):rmdirSync(e,r,t);if("EISDIR"!==t.code)throw t;rmdirSync(e,r,t)}}function rmdirSync(e,r,t){assert(e),assert(r),t&&assert(t instanceof Error);try{r.rmdirSync(e)}catch(i){if("ENOTDIR"===i.code)throw t;if("ENOTEMPTY"===i.code||"EEXIST"===i.code||"EPERM"===i.code)rmkidsSync(e,r);else if("ENOENT"!==i.code)throw i}}function rmkidsSync(e,r){if(assert(e),assert(r),r.readdirSync(e).forEach(t=>rimrafSync(path.join(e,t),r)),!isWindows){return r.rmdirSync(e,r)}{const t=Date.now();do{try{return r.rmdirSync(e,r)}catch(e){}}while(500>Date.now()-t)}}var rimraf_1=rimraf;rimraf.sync=rimrafSync;var rimraf$1=Object.freeze({default:rimraf_1,__moduleExports:rimraf_1}),rimraf$2=rimraf$1&&rimraf_1||rimraf$1;const u$3=require$$0.fromCallback;var remove={remove:u$3(rimraf$2),removeSync:rimraf$2.sync},remove_1=remove.remove,remove_2=remove.removeSync,remove$1=Object.freeze({default:remove,__moduleExports:remove,remove:remove_1,removeSync:remove_2}),require$$2$2=remove$1&&remove||remove$1;const u$4=require$$0.fromCallback,emptyDir=u$4(function(e,r){r=r||function(){},fs.readdir(e,(t,i)=>{if(t)return mkdir.mkdirs(e,r);i=i.map(r=>path.join(e,r)),function e(){const t=i.pop();if(!t)return r();require$$2$2.remove(t,t=>{if(t)return r(t);e()})}()})});function emptyDirSync(e){let r;try{r=fs.readdirSync(e)}catch(r){return mkdir.mkdirsSync(e)}r.forEach(r=>{r=path.join(e,r),require$$2$2.removeSync(r)})}var empty={emptyDirSync:emptyDirSync,emptydirSync:emptyDirSync,emptyDir:emptyDir,emptydir:emptyDir},empty_1=empty.emptyDirSync,empty_2=empty.emptydirSync,empty_3=empty.emptyDir,empty_4=empty.emptydir,empty$1=Object.freeze({default:empty,__moduleExports:empty,emptyDirSync:empty_1,emptydirSync:empty_2,emptyDir:empty_3,emptydir:empty_4});const u$5=require$$0.fromCallback,pathExists$3=require$$0$4.pathExists;function createFile(e,r){function t(){require$$0$1.writeFile(e,"",e=>{if(e)return r(e);r()})}require$$0$1.stat(e,(i,n)=>{if(!i&&n.isFile())return r();const s=path.dirname(e);pathExists$3(s,(e,i)=>e?r(e):i?t():void mkdir.mkdirs(s,e=>{if(e)return r(e);t()}))})}function createFileSync(e){let r;try{r=require$$0$1.statSync(e)}catch(e){}if(r&&r.isFile())return;const t=path.dirname(e);require$$0$1.existsSync(t)||mkdir.mkdirsSync(t),require$$0$1.writeFileSync(e,"")}var file={createFile:u$5(createFile),createFileSync:createFileSync},file_1=file.createFile,file_2=file.createFileSync,file$1=Object.freeze({default:file,__moduleExports:file,createFile:file_1,createFileSync:file_2});const u$6=require$$0.fromCallback,pathExists$4=require$$0$4.pathExists;function createLink(e,r,t){function i(e,r){require$$0$1.link(e,r,e=>{if(e)return t(e);t(null)})}pathExists$4(r,(n,s)=>n?t(n):s?t(null):void require$$0$1.lstat(e,n=>{if(n)return n.message=n.message.replace("lstat","ensureLink"),t(n);const s=path.dirname(r);pathExists$4(s,(n,o)=>n?t(n):o?i(e,r):void mkdir.mkdirs(s,n=>{if(n)return t(n);i(e,r)}))}))}function createLinkSync(e,r){if(require$$0$1.existsSync(r))return;try{require$$0$1.lstatSync(e)}catch(e){throw e.message=e.message.replace("lstat","ensureLink"),e}const t=path.dirname(r);return require$$0$1.existsSync(t)?require$$0$1.linkSync(e,r):(mkdir.mkdirsSync(t),require$$0$1.linkSync(e,r))}var link={createLink:u$6(createLink),createLinkSync:createLinkSync},link_1=link.createLink,link_2=link.createLinkSync,link$1=Object.freeze({default:link,__moduleExports:link,createLink:link_1,createLinkSync:link_2});const pathExists$5=require$$0$4.pathExists;function symlinkPaths(e,r,t){if(path.isAbsolute(e))return require$$0$1.lstat(e,r=>r?(r.message=r.message.replace("lstat","ensureSymlink"),t(r)):t(null,{toCwd:e,toDst:e}));{const i=path.dirname(r),n=path.join(i,e);return pathExists$5(n,(r,s)=>r?t(r):s?t(null,{toCwd:n,toDst:e}):require$$0$1.lstat(e,r=>r?(r.message=r.message.replace("lstat","ensureSymlink"),t(r)):t(null,{toCwd:e,toDst:path.relative(i,e)})))}}function symlinkPathsSync(e,r){let t;if(path.isAbsolute(e)){if(!(t=require$$0$1.existsSync(e)))throw Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}{const i=path.dirname(r),n=path.join(i,e);if(t=require$$0$1.existsSync(n))return{toCwd:n,toDst:e};if(!(t=require$$0$1.existsSync(e)))throw Error("relative srcpath does not exist");return{toCwd:e,toDst:path.relative(i,e)}}}var symlinkPaths_1={symlinkPaths:symlinkPaths,symlinkPathsSync:symlinkPathsSync},symlinkPaths_2=symlinkPaths_1.symlinkPaths,symlinkPaths_3=symlinkPaths_1.symlinkPathsSync,symlinkPaths$1=Object.freeze({default:symlinkPaths_1,__moduleExports:symlinkPaths_1,symlinkPaths:symlinkPaths_2,symlinkPathsSync:symlinkPaths_3});function symlinkType(e,r,t){if(t="function"==typeof r?r:t,r="function"!=typeof r&&r)return t(null,r);require$$0$1.lstat(e,(e,i)=>{if(e)return t(null,"file");r=i&&i.isDirectory()?"dir":"file",t(null,r)})}function symlinkTypeSync(e,r){let t;if(r)return r;try{t=require$$0$1.lstatSync(e)}catch(e){return"file"}return t&&t.isDirectory()?"dir":"file"}var symlinkType_1={symlinkType:symlinkType,symlinkTypeSync:symlinkTypeSync},symlinkType_2=symlinkType_1.symlinkType,symlinkType_3=symlinkType_1.symlinkTypeSync,symlinkType$1=Object.freeze({default:symlinkType_1,__moduleExports:symlinkType_1,symlinkType:symlinkType_2,symlinkTypeSync:symlinkType_3}),_symlinkPaths=symlinkPaths$1&&symlinkPaths_1||symlinkPaths$1,_symlinkType=symlinkType$1&&symlinkType_1||symlinkType$1;const u$7=require$$0.fromCallback,mkdirs$4=mkdir.mkdirs,mkdirsSync$3=mkdir.mkdirsSync,symlinkPaths$2=_symlinkPaths.symlinkPaths,symlinkPathsSync$1=_symlinkPaths.symlinkPathsSync,symlinkType$2=_symlinkType.symlinkType,symlinkTypeSync$1=_symlinkType.symlinkTypeSync,pathExists$6=require$$0$4.pathExists;function createSymlink(e,r,t,i){i="function"==typeof t?t:i,t="function"!=typeof t&&t,pathExists$6(r,(n,s)=>n?i(n):s?i(null):void symlinkPaths$2(e,r,(n,s)=>{if(n)return i(n);e=s.toDst,symlinkType$2(s.toCwd,t,(t,n)=>{if(t)return i(t);const s=path.dirname(r);pathExists$6(s,(t,o)=>t?i(t):o?require$$0$1.symlink(e,r,n,i):void mkdirs$4(s,t=>{if(t)return i(t);require$$0$1.symlink(e,r,n,i)}))})}))}function createSymlinkSync(e,r,t){if(require$$0$1.existsSync(r))return;const i=symlinkPathsSync$1(e,r);e=i.toDst,t=symlinkTypeSync$1(i.toCwd,t);const n=path.dirname(r);return require$$0$1.existsSync(n)?require$$0$1.symlinkSync(e,r,t):(mkdirsSync$3(n),require$$0$1.symlinkSync(e,r,t))}var _fs,symlink={createSymlink:u$7(createSymlink),createSymlinkSync:createSymlinkSync},symlink_1=symlink.createSymlink,symlink_2=symlink.createSymlinkSync,symlink$1=Object.freeze({default:symlink,__moduleExports:symlink,createSymlink:symlink_1,createSymlinkSync:symlink_2}),file$2=file$1&&file||file$1,link$2=link$1&&link||link$1,symlink$2=symlink$1&&symlink||symlink$1,ensure={createFile:file$2.createFile,createFileSync:file$2.createFileSync,ensureFile:file$2.createFile,ensureFileSync:file$2.createFileSync,createLink:link$2.createLink,createLinkSync:link$2.createLinkSync,ensureLink:link$2.createLink,ensureLinkSync:link$2.createLinkSync,createSymlink:symlink$2.createSymlink,createSymlinkSync:symlink$2.createSymlinkSync,ensureSymlink:symlink$2.createSymlink,ensureSymlinkSync:symlink$2.createSymlinkSync},ensure_1=ensure.createFile,ensure_2=ensure.createFileSync,ensure_3=ensure.ensureFile,ensure_4=ensure.ensureFileSync,ensure_5=ensure.createLink,ensure_6=ensure.createLinkSync,ensure_7=ensure.ensureLink,ensure_8=ensure.ensureLinkSync,ensure_9=ensure.createSymlink,ensure_10=ensure.createSymlinkSync,ensure_11=ensure.ensureSymlink,ensure_12=ensure.ensureSymlinkSync,ensure$1=Object.freeze({default:ensure,__moduleExports:ensure,createFile:ensure_1,createFileSync:ensure_2,ensureFile:ensure_3,ensureFileSync:ensure_4,createLink:ensure_5,createLinkSync:ensure_6,ensureLink:ensure_7,ensureLinkSync:ensure_8,createSymlink:ensure_9,createSymlinkSync:ensure_10,ensureSymlink:ensure_11,ensureSymlinkSync:ensure_12});try{_fs=require$$0$1}catch(e){_fs=fs}function readFile(e,r,t){null==t&&(t=r,r={}),"string"==typeof r&&(r={encoding:r});var i=!0;"throws"in(r=r||{})&&(i=r.throws),(r.fs||_fs).readFile(e,r,function(n,s){if(n)return t(n);var o;s=stripBom(s);try{o=JSON.parse(s,r?r.reviver:null)}catch(r){return i?(r.message=e+": "+r.message,t(r)):t(null,null)}t(null,o)})}function readFileSync(e,r){"string"==typeof(r=r||{})&&(r={encoding:r});var t=r.fs||_fs,i=!0;"throws"in r&&(i=r.throws);try{var n=t.readFileSync(e,r);return n=stripBom(n),JSON.parse(n,r.reviver)}catch(r){if(i)throw r.message=e+": "+r.message,r;return null}}function stringify(e,r){var t,i="\n";return"object"==typeof r&&null!==r&&(r.spaces&&(t=r.spaces),r.EOL&&(i=r.EOL)),JSON.stringify(e,r?r.replacer:null,t).replace(/\n/g,i)+i}function writeFile(e,r,t,i){null==i&&(i=t,t={});var n=(t=t||{}).fs||_fs,s="";try{s=stringify(r,t)}catch(e){return void(i&&i(e,null))}n.writeFile(e,s,t,i)}function writeFileSync(e,r,t){var i=(t=t||{}).fs||_fs,n=stringify(r,t);return i.writeFileSync(e,n,t)}function stripBom(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e=e.replace(/^\uFEFF/,"")}var jsonfile={readFile:readFile,readFileSync:readFileSync,writeFile:writeFile,writeFileSync:writeFileSync},jsonfile_1=jsonfile,jsonfile$1=Object.freeze({default:jsonfile_1,__moduleExports:jsonfile_1}),jsonFile=jsonfile$1&&jsonfile_1||jsonfile$1;const u$8=require$$0.fromCallback;var jsonfile$2={readJson:u$8(jsonFile.readFile),readJsonSync:jsonFile.readFileSync,writeJson:u$8(jsonFile.writeFile),writeJsonSync:jsonFile.writeFileSync},jsonfile_1$1=jsonfile$2.readJson,jsonfile_2=jsonfile$2.readJsonSync,jsonfile_3=jsonfile$2.writeJson,jsonfile_4=jsonfile$2.writeJsonSync,jsonfile$3=Object.freeze({default:jsonfile$2,__moduleExports:jsonfile$2,readJson:jsonfile_1$1,readJsonSync:jsonfile_2,writeJson:jsonfile_3,writeJsonSync:jsonfile_4}),jsonFile$1=jsonfile$3&&jsonfile$2||jsonfile$3;const pathExists$7=require$$0$4.pathExists;function outputJson(e,r,t,i){"function"==typeof t&&(i=t,t={});const n=path.dirname(e);pathExists$7(n,(s,o)=>s?i(s):o?jsonFile$1.writeJson(e,r,t,i):void mkdir.mkdirs(n,n=>{if(n)return i(n);jsonFile$1.writeJson(e,r,t,i)}))}var outputJson_1=outputJson,outputJson$1=Object.freeze({default:outputJson_1,__moduleExports:outputJson_1});function outputJsonSync(e,r,t){const i=path.dirname(e);require$$0$1.existsSync(i)||mkdir.mkdirsSync(i),jsonFile$1.writeJsonSync(e,r,t)}var outputJsonSync_1=outputJsonSync,outputJsonSync$1=Object.freeze({default:outputJsonSync_1,__moduleExports:outputJsonSync_1}),require$$1$2=outputJson$1&&outputJson_1||outputJson$1,require$$2$3=outputJsonSync$1&&outputJsonSync_1||outputJsonSync$1;const u$9=require$$0.fromCallback;jsonFile$1.outputJson=u$9(require$$1$2),jsonFile$1.outputJsonSync=require$$2$3,jsonFile$1.outputJSON=jsonFile$1.outputJson,jsonFile$1.outputJSONSync=jsonFile$1.outputJsonSync,jsonFile$1.writeJSON=jsonFile$1.writeJson,jsonFile$1.writeJSONSync=jsonFile$1.writeJsonSync,jsonFile$1.readJSON=jsonFile$1.readJson,jsonFile$1.readJSONSync=jsonFile$1.readJsonSync;var json=jsonFile$1,json$1=Object.freeze({default:json,__moduleExports:json}),require$$0$5=copySync$3&&copySync$2||copySync$3;const copySync$4=require$$0$5.copySync,removeSync=require$$2$2.removeSync,mkdirpSync$1=mkdir.mkdirsSync;function moveSync(e,r,t){const i=(t=t||{}).overwrite||t.clobber||!1;if(e=path.resolve(e),r=path.resolve(r),e===r)return require$$0$1.accessSync(e);if(isSrcSubdir$2(e,r))throw Error(`Cannot move '${e}' into itself '${r}'.`);mkdirpSync$1(path.dirname(r)),function(){if(i)try{require$$0$1.renameSync(e,r)}catch(n){if("ENOTEMPTY"===n.code||"EEXIST"===n.code||"EPERM"===n.code)return removeSync(r),t.overwrite=!1,moveSync(e,r,t);if("EXDEV"!==n.code)throw n;return moveSyncAcrossDevice(e,r,i)}else try{require$$0$1.linkSync(e,r),require$$0$1.unlinkSync(e)}catch(t){if("EXDEV"===t.code||"EISDIR"===t.code||"EPERM"===t.code||"ENOTSUP"===t.code)return moveSyncAcrossDevice(e,r,i);throw t}}()}function moveSyncAcrossDevice(e,r,t){return require$$0$1.statSync(e).isDirectory()?moveDirSyncAcrossDevice(e,r,t):moveFileSyncAcrossDevice(e,r,t)}function moveFileSyncAcrossDevice(e,r,t){const i=require$$2$1(65536),n=t?"w":"wx",s=require$$0$1.openSync(e,"r"),o=require$$0$1.fstatSync(s),c=require$$0$1.openSync(r,n,o.mode);let a=0;for(;o.size>a;){const e=require$$0$1.readSync(s,i,0,65536,a);require$$0$1.writeSync(c,i,0,e),a+=e}return require$$0$1.closeSync(s),require$$0$1.closeSync(c),require$$0$1.unlinkSync(e)}function moveDirSyncAcrossDevice(e,r,t){const i={overwrite:!1};function n(){return copySync$4(e,r,i),removeSync(e)}t?(removeSync(r),n()):n()}function isSrcSubdir$2(e,r){try{return require$$0$1.statSync(e).isDirectory()&&e!==r&&r.indexOf(e)>-1&&r.split(path.dirname(e)+path.sep)[1].split(path.sep)[0]===path.basename(e)}catch(e){return!1}}var moveSync_1={moveSync:moveSync},moveSync_2=moveSync_1.moveSync,moveSync$1=Object.freeze({default:moveSync_1,__moduleExports:moveSync_1,moveSync:moveSync_2}),require$$1$3=copy$3&&copy$2||copy$3;const u$a=require$$0.fromCallback,copy$4=require$$1$3.copy,remove$2=require$$2$2.remove,mkdirp$1=mkdir.mkdirp,pathExists$8=require$$0$4.pathExists;function move(e,r,t,i){"function"==typeof t&&(i=t,t={});const n=t.overwrite||t.clobber||!1;if(e=path.resolve(e),r=path.resolve(r),e===r)return require$$0$1.access(e,i);require$$0$1.stat(e,(t,s)=>t?i(t):s.isDirectory()&&isSrcSubdir$3(e,r)?i(Error(`Cannot move '${e}' to a subdirectory of itself, '${r}'.`)):void mkdirp$1(path.dirname(r),t=>t?i(t):doRename(e,r,n,i)))}function doRename(e,r,t,i){if(t)return remove$2(r,n=>n?i(n):rename(e,r,t,i));pathExists$8(r,(n,s)=>n?i(n):s?i(Error("dest already exists.")):rename(e,r,t,i))}function rename(e,r,t,i){require$$0$1.rename(e,r,n=>n?"EXDEV"!==n.code?i(n):moveAcrossDevice(e,r,t,i):i())}function moveAcrossDevice(e,r,t,i){copy$4(e,r,{overwrite:t,errorOnExist:!0},r=>r?i(r):remove$2(e,i))}function isSrcSubdir$3(e,r){const t=e.split(path.sep),i=r.split(path.sep);return t.reduce((e,r,t)=>e&&i[t]===r,!0)}var move_1={move:u$a(move)},move_2=move_1.move,move$1=Object.freeze({default:move_1,__moduleExports:move_1,move:move_2});const u$b=require$$0.fromCallback,pathExists$9=require$$0$4.pathExists;function outputFile(e,r,t,i){"function"==typeof t&&(i=t,t="utf8");const n=path.dirname(e);pathExists$9(n,(s,o)=>s?i(s):o?require$$0$1.writeFile(e,r,t,i):void mkdir.mkdirs(n,n=>{if(n)return i(n);require$$0$1.writeFile(e,r,t,i)}))}function outputFileSync(e,...r){const t=path.dirname(e);if(require$$0$1.existsSync(t))return require$$0$1.writeFileSync(e,...r);mkdir.mkdirsSync(t),require$$0$1.writeFileSync(e,...r)}var output={outputFile:u$b(outputFile),outputFileSync:outputFileSync},output_1=output.outputFile,output_2=output.outputFileSync,output$1=Object.freeze({default:output,__moduleExports:output,outputFile:output_1,outputFileSync:output_2}),require$$3=empty$1&&empty||empty$1,require$$4=ensure$1&&ensure||ensure$1,require$$5=json$1&&json||json$1,require$$7=moveSync$1&&moveSync_1||moveSync$1,require$$8=move$1&&move_1||move$1,require$$9=output$1&&output||output$1,lib=createCommonjsModule(function(e){e.exports=Object.assign({},fs$4,require$$0$5,require$$1$3,require$$3,require$$4,require$$5,mkdir,require$$7,require$$8,require$$9,require$$0$4,require$$2$2),Object.getOwnPropertyDescriptor(fs,"promises")&&Object.defineProperty(e.exports,"promises",{get:()=>fs.promises})});function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var classCallCheck=_classCallCheck;function _defineProperties(e,r){for(var t=0;r.length>t;t++){var i=r[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),e}var createClass=_createClass,Generator=function(){function e(){classCallCheck(this,e)}return createClass(e,null,[{key:"generate",value:function(e,r){return"\n    const { Client } = require('@rlay/rlay-client-lib');\n\n    const client = new Client();\n    const schemaCIDs = ".concat(e,";\n    const schema = ").concat(r,";\n\n    client.initSchema(schemaCIDs, schema);\n    client.initClient();\n\n    module.exports = client;")}}]),e}(),program=require("yargs").env().option("seeded-schema",{describe:"relative path to file that contains the seeded schema cids"}).option("schema-dir",{describe:"relative path to folder that contains the schema .js files"}).option("client-path",{describe:"relative path to file that exports generated rlay client"}).default("seeded-schema","./build/schema/seed.json").default("schema-dir","./schema").default("client-path","./generated/rlay-client/index.js").argv,schemas={},assertions=[],schemaPath=path.join(process.cwd(),program.schemaDir),seededSchemaFilePath=path.join(process.cwd(),program.seededSchema),seededSchema=require(seededSchemaFilePath),addAssertions=function(e,r){var t=["Class","DataProperty","ObjectProperty"];Object.keys(r).forEach(function(i){t.includes(r[i].type)&&assertions.push({file:e,key:i,assertion:r[i]})})};if(!lib.existsSync(schemaPath))throw Error("".concat(schemaPath," does not exist"));lib.readdirSync(schemaPath).forEach(function(e){schemas[e.split(".").shift()]=require(path.join(schemaPath,e))}),Object.keys(schemas).forEach(function(e){Object.keys(schemas[e]).forEach(function(r){addAssertions(e,schemas[e][r]())})});var source=Generator.generate(JSON.stringify(seededSchema),JSON.stringify(assertions)),clientPathSplit=program.clientPath.split("/"),clientPathFile="./"+clientPathSplit.pop(),clientPathDir=clientPathSplit.join("/")+"/",generatedDir=path.join(process.cwd(),clientPathDir),generatedFile=path.join(generatedDir,clientPathFile);lib.ensureDirSync(generatedDir),lib.writeFileSync(generatedFile,source,"utf8");
