#!/usr/bin/env node
"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var fs=_interopDefault(require("fs")),constants=_interopDefault(require("constants")),stream=_interopDefault(require("stream")),util=_interopDefault(require("util")),assert=_interopDefault(require("assert")),path=_interopDefault(require("path")),os=_interopDefault(require("os"));function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var fromCallback=function(e){return Object.defineProperty(function(){if("function"!=typeof arguments[arguments.length-1])return new Promise((t,r)=>{arguments[arguments.length]=(e,n)=>{if(e)return r(e);t(n)},arguments.length++,e.apply(this,arguments)});e.apply(this,arguments)},"name",{value:e.name})},fromPromise=function(e){return Object.defineProperty(function(){const t=arguments[arguments.length-1];if("function"!=typeof t)return e.apply(this,arguments);e.apply(this,arguments).then(e=>t(null,e),t)},"name",{value:e.name})},universalify={fromCallback:fromCallback,fromPromise:fromPromise},fs_1=clone(fs);function clone(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Object)var t={__proto__:e.__proto__};else t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}),t}var origCwd=process.cwd,cwd=null,platform=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return cwd||(cwd=origCwd.call(process)),cwd};try{process.cwd()}catch(e){}var chdir=process.chdir;process.chdir=function(e){cwd=null,chdir.call(process,e)};var polyfills=patch;function patch(e){var t,r,n;constants.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&patchLchmod(e),e.lutimes||patchLutimes(e),e.chown=chownFix(e.chown),e.fchown=chownFix(e.fchown),e.lchown=chownFix(e.lchown),e.chmod=chmodFix(e.chmod),e.fchmod=chmodFix(e.fchmod),e.lchmod=chmodFix(e.lchmod),e.chownSync=chownFixSync(e.chownSync),e.fchownSync=chownFixSync(e.fchownSync),e.lchownSync=chownFixSync(e.lchownSync),e.chmodSync=chmodFixSync(e.chmodSync),e.fchmodSync=chmodFixSync(e.fchmodSync),e.lchmodSync=chmodFixSync(e.lchmodSync),e.stat=statFix(e.stat),e.fstat=statFix(e.fstat),e.lstat=statFix(e.lstat),e.statSync=statFixSync(e.statSync),e.fstatSync=statFixSync(e.fstatSync),e.lstatSync=statFixSync(e.lstatSync),e.lchmod||(e.lchmod=function(e,t,r){r&&process.nextTick(r)},e.lchmodSync=function(){}),e.lchown||(e.lchown=function(e,t,r,n){n&&process.nextTick(n)},e.lchownSync=function(){}),"win32"===platform&&(e.rename=(t=e.rename,function(r,n,i){var s=Date.now(),o=0;t(r,n,function c(a){if(a&&("EACCES"===a.code||"EPERM"===a.code)&&6e4>Date.now()-s)return setTimeout(function(){e.stat(n,function(e,s){e&&"ENOENT"===e.code?t(r,n,c):i(a)})},o),void(100>o&&(o+=10));i&&i(a)})})),e.read=(r=e.read,function(t,n,i,s,o,c){var a;if(c&&"function"==typeof c){var u=0;a=function(l,f,y){if(l&&"EAGAIN"===l.code&&10>u)return u++,r.call(e,t,n,i,s,o,a);c.apply(this,arguments)}}return r.call(e,t,n,i,s,o,a)}),e.readSync=(n=e.readSync,function(t,r,i,s,o){for(var c=0;;)try{return n.call(e,t,r,i,s,o)}catch(e){if("EAGAIN"===e.code&&10>c){c++;continue}throw e}})}function patchLchmod(e){e.lchmod=function(t,r,n){e.open(t,constants.O_WRONLY|constants.O_SYMLINK,r,function(t,i){t?n&&n(t):e.fchmod(i,r,function(t){e.close(i,function(e){n&&n(t||e)})})})},e.lchmodSync=function(t,r){var n,i=e.openSync(t,constants.O_WRONLY|constants.O_SYMLINK,r),s=!0;try{n=e.fchmodSync(i,r),s=!1}finally{if(s)try{e.closeSync(i)}catch(e){}else e.closeSync(i)}return n}}function patchLutimes(e){constants.hasOwnProperty("O_SYMLINK")?(e.lutimes=function(t,r,n,i){e.open(t,constants.O_SYMLINK,function(t,s){t?i&&i(t):e.futimes(s,r,n,function(t){e.close(s,function(e){i&&i(t||e)})})})},e.lutimesSync=function(t,r,n){var i,s=e.openSync(t,constants.O_SYMLINK),o=!0;try{i=e.futimesSync(s,r,n),o=!1}finally{if(o)try{e.closeSync(s)}catch(e){}else e.closeSync(s)}return i}):(e.lutimes=function(e,t,r,n){n&&process.nextTick(n)},e.lutimesSync=function(){})}function chmodFix(e){return e?function(t,r,n){return e.call(fs_1,t,r,function(e){chownErOk(e)&&(e=null),n&&n.apply(this,arguments)})}:e}function chmodFixSync(e){return e?function(t,r){try{return e.call(fs_1,t,r)}catch(e){if(!chownErOk(e))throw e}}:e}function chownFix(e){return e?function(t,r,n,i){return e.call(fs_1,t,r,n,function(e){chownErOk(e)&&(e=null),i&&i.apply(this,arguments)})}:e}function chownFixSync(e){return e?function(t,r,n){try{return e.call(fs_1,t,r,n)}catch(e){if(!chownErOk(e))throw e}}:e}function statFix(e){return e?function(t,r){return e.call(fs_1,t,function(e,t){if(!t)return r.apply(this,arguments);0>t.uid&&(t.uid+=4294967296),0>t.gid&&(t.gid+=4294967296),r&&r.apply(this,arguments)})}:e}function statFixSync(e){return e?function(t){var r=e.call(fs_1,t);return 0>r.uid&&(r.uid+=4294967296),0>r.gid&&(r.gid+=4294967296),r}:e}function chownErOk(e){return!e||("ENOSYS"===e.code||!(process.getuid&&0===process.getuid()||"EINVAL"!==e.code&&"EPERM"!==e.code))}var Stream=stream.Stream,legacyStreams=legacy;function legacy(e){return{ReadStream:function t(r,n){if(!(this instanceof t))return new t(r,n);Stream.call(this);var i=this;this.path=r;this.fd=null;this.readable=!0;this.paused=!1;this.flags="r";this.mode=438;this.bufferSize=65536;n=n||{};var s=Object.keys(n);for(var o=0,c=s.length;c>o;o++){var a=s[o];this[a]=n[a]}this.encoding&&this.setEncoding(this.encoding);if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw Error("start must be <= end");this.pos=this.start}if(null!==this.fd)return void process.nextTick(function(){i._read()});e.open(this.path,this.flags,this.mode,function(e,t){if(e)return i.emit("error",e),void(i.readable=!1);i.fd=t,i.emit("open",t),i._read()})},WriteStream:function t(r,n){if(!(this instanceof t))return new t(r,n);Stream.call(this);this.path=r;this.fd=null;this.writable=!0;this.flags="w";this.encoding="binary";this.mode=438;this.bytesWritten=0;n=n||{};var i=Object.keys(n);for(var s=0,o=i.length;o>s;s++){var c=i[s];this[c]=n[c]}if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(0>this.start)throw Error("start must be >= zero");this.pos=this.start}this.busy=!1;this._queue=[];null===this.fd&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}}var gracefulFs=createCommonjsModule(function(e){var t=[];var r,n,i=function(){};function s(e){polyfills(e),e.gracefulify=s,e.FileReadStream=y,e.FileWriteStream=p,e.createReadStream=function(e,t){return new y(e,t)},e.createWriteStream=function(e,t){return new p(e,t)};var t=e.readFile;e.readFile=function(e,r,n){"function"==typeof r&&(n=r,r=null);return function e(r,n,i){return t(r,n,function(t){!t||"EMFILE"!==t.code&&"ENFILE"!==t.code?("function"==typeof i&&i.apply(this,arguments),c()):o([e,[r,n,i]])})}(e,r,n)};var r=e.writeFile;e.writeFile=function(e,t,n,i){"function"==typeof n&&(i=n,n=null);return function e(t,n,i,s){return r(t,n,i,function(r){!r||"EMFILE"!==r.code&&"ENFILE"!==r.code?("function"==typeof s&&s.apply(this,arguments),c()):o([e,[t,n,i,s]])})}(e,t,n,i)};var n=e.appendFile;n&&(e.appendFile=function(e,t,r,i){"function"==typeof r&&(i=r,r=null);return function e(t,r,i,s){return n(t,r,i,function(n){!n||"EMFILE"!==n.code&&"ENFILE"!==n.code?("function"==typeof s&&s.apply(this,arguments),c()):o([e,[t,r,i,s]])})}(e,t,r,i)});var i=e.readdir;function a(t){return i.apply(e,t)}if(e.readdir=function(e,t,r){var n=[e];"function"!=typeof t?n.push(t):r=t;return n.push(function(e,t){t&&t.sort&&t.sort(),!e||"EMFILE"!==e.code&&"ENFILE"!==e.code?("function"==typeof r&&r.apply(this,arguments),c()):o([a,[n]])}),a(n)},"v0.8"===process.version.substr(0,4)){var u=legacyStreams(e);y=u.ReadStream,p=u.WriteStream}var l=e.ReadStream;y.prototype=Object.create(l.prototype),y.prototype.open=function(){var e=this;d(e.path,e.flags,e.mode,function(t,r){t?(e.autoClose&&e.destroy(),e.emit("error",t)):(e.fd=r,e.emit("open",r),e.read())})};var f=e.WriteStream;function y(e,t){return this instanceof y?(l.apply(this,arguments),this):y.apply(Object.create(y.prototype),arguments)}function p(e,t){return this instanceof p?(f.apply(this,arguments),this):p.apply(Object.create(p.prototype),arguments)}p.prototype=Object.create(f.prototype),p.prototype.open=function(){var e=this;d(e.path,e.flags,e.mode,function(t,r){t?(e.destroy(),e.emit("error",t)):(e.fd=r,e.emit("open",r))})},e.ReadStream=y,e.WriteStream=p;var m=e.open;function d(e,t,r,n){return"function"==typeof r&&(n=r,r=null),function e(t,r,n,i){return m(t,r,n,function(s,a){!s||"EMFILE"!==s.code&&"ENFILE"!==s.code?("function"==typeof i&&i.apply(this,arguments),c()):o([e,[t,r,n,i]])})}(e,t,r,n)}return e.open=d,e}function o(e){i("ENQUEUE",e[0].name,e[1]),t.push(e)}function c(){var e=t.shift();e&&(i("RETRY",e[0].name,e[1]),e[0].apply(null,e[1]))}util.debuglog?i=util.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(i=function(){var e=util.format.apply(util,arguments);e="GFS4: "+e.split(/\n/).join("\nGFS4: "),console.error(e)}),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){i(t),assert.equal(t.length,0)}),e.exports=s(fs_1),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&(e.exports=s(fs)),e.exports.close=fs.close=(r=fs.close,function(e,t){return r.call(fs,e,function(e){e||c(),"function"==typeof t&&t.apply(this,arguments)})}),e.exports.closeSync=fs.closeSync=(n=fs.closeSync,function(e){var t=n.apply(fs,arguments);return c(),t})}),gracefulFs_1=gracefulFs.close,gracefulFs_2=gracefulFs.closeSync,fs_1$1=createCommonjsModule(function(e,t){const r=universalify.fromCallback,n=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchown","lchmod","link","lstat","mkdir","mkdtemp","open","readFile","readdir","readlink","realpath","rename","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(e=>"function"==typeof gracefulFs[e]);Object.keys(gracefulFs).forEach(e=>{"promises"!==e&&(t[e]=gracefulFs[e])}),n.forEach(e=>{t[e]=r(gracefulFs[e])}),t.exists=function(e,t){return"function"==typeof t?gracefulFs.exists(e,t):new Promise(t=>gracefulFs.exists(e,t))},t.read=function(e,t,r,n,i,s){return"function"==typeof s?gracefulFs.read(e,t,r,n,i,s):new Promise((s,o)=>{gracefulFs.read(e,t,r,n,i,(e,t,r)=>{if(e)return o(e);s({bytesRead:t,buffer:r})})})},t.write=function(e,t,...r){return"function"==typeof r[r.length-1]?gracefulFs.write(e,t,...r):new Promise((n,i)=>{gracefulFs.write(e,t,...r,(e,t,r)=>{if(e)return i(e);n({bytesWritten:t,buffer:r})})})}}),fs_2=fs_1$1.exists,fs_3=fs_1$1.read,fs_4=fs_1$1.write;function getRootPath(e){return(e=path.normalize(path.resolve(e)).split(path.sep)).length>0?e[0]:null}const INVALID_PATH_CHARS=/[<>:"|?*]/;function invalidWin32Path(e){const t=getRootPath(e);return e=e.replace(t,""),INVALID_PATH_CHARS.test(e)}var win32={getRootPath:getRootPath,invalidWin32Path:invalidWin32Path};const invalidWin32Path$1=win32.invalidWin32Path,o777=parseInt("0777",8);function mkdirs(e,t,r,n){if("function"==typeof t?(r=t,t={}):t&&"object"==typeof t||(t={mode:t}),"win32"===process.platform&&invalidWin32Path$1(e)){const t=Error(e+" contains invalid WIN32 path characters.");return t.code="EINVAL",r(t)}let i=t.mode;const s=t.fs||gracefulFs;void 0===i&&(i=o777&~process.umask()),n||(n=null),r=r||function(){},e=path.resolve(e),s.mkdir(e,i,i=>{if(!i)return r(null,n=n||e);switch(i.code){case"ENOENT":if(path.dirname(e)===e)return r(i);mkdirs(path.dirname(e),t,(n,i)=>{n?r(n,i):mkdirs(e,t,r,i)});break;default:s.stat(e,(e,t)=>{e||!t.isDirectory()?r(i,n):r(null,n)})}})}var mkdirs_1=mkdirs;const invalidWin32Path$2=win32.invalidWin32Path,o777$1=parseInt("0777",8);function mkdirsSync(e,t,r){t&&"object"==typeof t||(t={mode:t});let n=t.mode;const i=t.fs||gracefulFs;if("win32"===process.platform&&invalidWin32Path$2(e)){const t=Error(e+" contains invalid WIN32 path characters.");throw t.code="EINVAL",t}void 0===n&&(n=o777$1&~process.umask()),r||(r=null),e=path.resolve(e);try{i.mkdirSync(e,n),r=r||e}catch(n){if("ENOENT"===n.code){if(path.dirname(e)===e)throw n;r=mkdirsSync(path.dirname(e),t,r),mkdirsSync(e,t,r)}else{let t;try{t=i.statSync(e)}catch(e){throw n}if(!t.isDirectory())throw n}}return r}var mkdirsSync_1=mkdirsSync;const u=universalify.fromCallback,mkdirs$1=u(mkdirs_1);var mkdirs_1$1={mkdirs:mkdirs$1,mkdirsSync:mkdirsSync_1,mkdirp:mkdirs$1,mkdirpSync:mkdirsSync_1,ensureDir:mkdirs$1,ensureDirSync:mkdirsSync_1};function hasMillisResSync(){let e=path.join("millis-test-sync"+Date.now()+(""+Math.random()).slice(2));e=path.join(os.tmpdir(),e);const t=new Date(1435410243862);gracefulFs.writeFileSync(e,"https://github.com/jprichardson/node-fs-extra/pull/141");const r=gracefulFs.openSync(e,"r+");return gracefulFs.futimesSync(r,t,t),gracefulFs.closeSync(r),gracefulFs.statSync(e).mtime>1435410243e3}function hasMillisRes(e){let t=path.join("millis-test"+Date.now()+(""+Math.random()).slice(2));t=path.join(os.tmpdir(),t);const r=new Date(1435410243862);gracefulFs.writeFile(t,"https://github.com/jprichardson/node-fs-extra/pull/141",n=>{if(n)return e(n);gracefulFs.open(t,"r+",(n,i)=>{if(n)return e(n);gracefulFs.futimes(i,r,r,r=>{if(r)return e(r);gracefulFs.close(i,r=>{if(r)return e(r);gracefulFs.stat(t,(t,r)=>{if(t)return e(t);e(null,r.mtime>1435410243e3)})})})})})}function timeRemoveMillis(e){if("number"==typeof e)return 1e3*Math.floor(e/1e3);if(e instanceof Date)return new Date(1e3*Math.floor(e.getTime()/1e3));throw Error("fs-extra: timeRemoveMillis() unknown parameter type")}function utimesMillis(e,t,r,n){gracefulFs.open(e,"r+",(e,i)=>{if(e)return n(e);gracefulFs.futimes(i,t,r,e=>{gracefulFs.close(i,t=>{n&&n(e||t)})})})}function utimesMillisSync(e,t,r){const n=gracefulFs.openSync(e,"r+");return gracefulFs.futimesSync(n,t,r),gracefulFs.closeSync(n)}var utimes={hasMillisRes:hasMillisRes,hasMillisResSync:hasMillisResSync,timeRemoveMillis:timeRemoveMillis,utimesMillis:utimesMillis,utimesMillisSync:utimesMillisSync},buffer=function(e){if("function"==typeof Buffer.allocUnsafe)try{return Buffer.allocUnsafe(e)}catch(t){return new Buffer(e)}return new Buffer(e)};const mkdirpSync=mkdirs_1$1.mkdirsSync,utimesSync=utimes.utimesMillisSync,notExist=Symbol("notExist");function copySync(e,t,r){"function"==typeof r&&(r={filter:r}),(r=r||{}).clobber=!("clobber"in r)||!!r.clobber,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&"ia32"===process.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269");const n=checkPaths(e,t);if(r.filter&&!r.filter(e,t))return;const i=path.dirname(t);return gracefulFs.existsSync(i)||mkdirpSync(i),startCopy(n,e,t,r)}function startCopy(e,t,r,n){if(!n.filter||n.filter(t,r))return getStats(e,t,r,n)}function getStats(e,t,r,n){const i=(n.dereference?gracefulFs.statSync:gracefulFs.lstatSync)(t);return i.isDirectory()?onDir(i,e,t,r,n):i.isFile()||i.isCharacterDevice()||i.isBlockDevice()?onFile(i,e,t,r,n):i.isSymbolicLink()?onLink(e,t,r,n):void 0}function onFile(e,t,r,n,i){return t===notExist?copyFile(e,r,n,i):mayCopyFile(e,r,n,i)}function mayCopyFile(e,t,r,n){if(n.overwrite)return gracefulFs.unlinkSync(r),copyFile(e,t,r,n);if(n.errorOnExist)throw Error(`'${r}' already exists`)}function copyFile(e,t,r,n){return"function"==typeof gracefulFs.copyFileSync?(gracefulFs.copyFileSync(t,r),gracefulFs.chmodSync(r,e.mode),n.preserveTimestamps?utimesSync(r,e.atime,e.mtime):void 0):copyFileFallback(e,t,r,n)}function copyFileFallback(e,t,r,n){const i=buffer(65536),s=gracefulFs.openSync(t,"r"),o=gracefulFs.openSync(r,"w",e.mode);let c=0;for(;e.size>c;){const e=gracefulFs.readSync(s,i,0,65536,c);gracefulFs.writeSync(o,i,0,e),c+=e}n.preserveTimestamps&&gracefulFs.futimesSync(o,e.atime,e.mtime),gracefulFs.closeSync(s),gracefulFs.closeSync(o)}function onDir(e,t,r,n,i){if(t===notExist)return mkDirAndCopy(e,r,n,i);if(t&&!t.isDirectory())throw Error(`Cannot overwrite non-directory '${n}' with directory '${r}'.`);return copyDir(r,n,i)}function mkDirAndCopy(e,t,r,n){return gracefulFs.mkdirSync(r),copyDir(t,r,n),gracefulFs.chmodSync(r,e.mode)}function copyDir(e,t,r){gracefulFs.readdirSync(e).forEach(n=>copyDirItem(n,e,t,r))}function copyDirItem(e,t,r,n){const i=path.join(t,e),s=path.join(r,e);return startCopy(checkPaths(i,s),i,s,n)}function onLink(e,t,r,n){let i=gracefulFs.readlinkSync(t);if(n.dereference&&(i=path.resolve(process.cwd(),i)),e===notExist)return gracefulFs.symlinkSync(i,r);{let e;try{e=gracefulFs.readlinkSync(r)}catch(e){if("EINVAL"===e.code||"UNKNOWN"===e.code)return gracefulFs.symlinkSync(i,r);throw e}if(n.dereference&&(e=path.resolve(process.cwd(),e)),isSrcSubdir(i,e))throw Error(`Cannot copy '${i}' to a subdirectory of itself, '${e}'.`);if(gracefulFs.statSync(r).isDirectory()&&isSrcSubdir(e,i))throw Error(`Cannot overwrite '${e}' with '${i}'.`);return copyLink(i,r)}}function copyLink(e,t){return gracefulFs.unlinkSync(t),gracefulFs.symlinkSync(e,t)}function isSrcSubdir(e,t){const r=path.resolve(e).split(path.sep),n=path.resolve(t).split(path.sep);return r.reduce((e,t,r)=>e&&n[r]===t,!0)}function checkStats(e,t){const r=gracefulFs.statSync(e);let n;try{n=gracefulFs.statSync(t)}catch(e){if("ENOENT"===e.code)return{srcStat:r,destStat:notExist};throw e}return{srcStat:r,destStat:n}}function checkPaths(e,t){const{srcStat:r,destStat:n}=checkStats(e,t);if(n.ino&&n.ino===r.ino)throw Error("Source and destination must not be the same.");if(r.isDirectory()&&isSrcSubdir(e,t))throw Error(`Cannot copy '${e}' to a subdirectory of itself, '${t}'.`);return n}var copySync_1=copySync,copySync$1={copySync:copySync_1};const u$1=universalify.fromPromise;function pathExists(e){return fs_1$1.access(e).then(()=>!0).catch(()=>!1)}var pathExists_1={pathExists:u$1(pathExists),pathExistsSync:fs_1$1.existsSync};const mkdirp=mkdirs_1$1.mkdirs,pathExists$1=pathExists_1.pathExists,utimes$1=utimes.utimesMillis,notExist$1=Symbol("notExist");function copy(e,t,r,n){"function"!=typeof r||n?"function"==typeof r&&(r={filter:r}):(n=r,r={}),n=n||function(){},(r=r||{}).clobber=!("clobber"in r)||!!r.clobber,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&"ia32"===process.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269"),checkPaths$1(e,t,(i,s)=>i?n(i):r.filter?handleFilter(checkParentDir,s,e,t,r,n):checkParentDir(s,e,t,r,n))}function checkParentDir(e,t,r,n,i){const s=path.dirname(r);pathExists$1(s,(o,c)=>o?i(o):c?startCopy$1(e,t,r,n,i):void mkdirp(s,s=>s?i(s):startCopy$1(e,t,r,n,i)))}function handleFilter(e,t,r,n,i,s){Promise.resolve(i.filter(r,n)).then(o=>o?t?e(t,r,n,i,s):e(r,n,i,s):s(),e=>s(e))}function startCopy$1(e,t,r,n,i){return n.filter?handleFilter(getStats$1,e,t,r,n,i):getStats$1(e,t,r,n,i)}function getStats$1(e,t,r,n,i){(n.dereference?gracefulFs.stat:gracefulFs.lstat)(t,(s,o)=>s?i(s):o.isDirectory()?onDir$1(o,e,t,r,n,i):o.isFile()||o.isCharacterDevice()||o.isBlockDevice()?onFile$1(o,e,t,r,n,i):o.isSymbolicLink()?onLink$1(e,t,r,n,i):void 0)}function onFile$1(e,t,r,n,i,s){return t===notExist$1?copyFile$1(e,r,n,i,s):mayCopyFile$1(e,r,n,i,s)}function mayCopyFile$1(e,t,r,n,i){if(!n.overwrite)return n.errorOnExist?i(Error(`'${r}' already exists`)):i();gracefulFs.unlink(r,s=>s?i(s):copyFile$1(e,t,r,n,i))}function copyFile$1(e,t,r,n,i){return"function"==typeof gracefulFs.copyFile?gracefulFs.copyFile(t,r,t=>t?i(t):setDestModeAndTimestamps(e,r,n,i)):copyFileFallback$1(e,t,r,n,i)}function copyFileFallback$1(e,t,r,n,i){const s=gracefulFs.createReadStream(t);s.on("error",e=>i(e)).once("open",()=>{const t=gracefulFs.createWriteStream(r,{mode:e.mode});t.on("error",e=>i(e)).on("open",()=>s.pipe(t)).once("close",()=>setDestModeAndTimestamps(e,r,n,i))})}function setDestModeAndTimestamps(e,t,r,n){gracefulFs.chmod(t,e.mode,i=>i?n(i):r.preserveTimestamps?utimes$1(t,e.atime,e.mtime,n):n())}function onDir$1(e,t,r,n,i,s){return t===notExist$1?mkDirAndCopy$1(e,r,n,i,s):t&&!t.isDirectory()?s(Error(`Cannot overwrite non-directory '${n}' with directory '${r}'.`)):copyDir$1(r,n,i,s)}function mkDirAndCopy$1(e,t,r,n,i){gracefulFs.mkdir(r,s=>{if(s)return i(s);copyDir$1(t,r,n,t=>t?i(t):gracefulFs.chmod(r,e.mode,i))})}function copyDir$1(e,t,r,n){gracefulFs.readdir(e,(i,s)=>i?n(i):copyDirItems(s,e,t,r,n))}function copyDirItems(e,t,r,n,i){const s=e.pop();return s?copyDirItem$1(e,s,t,r,n,i):i()}function copyDirItem$1(e,t,r,n,i,s){const o=path.join(r,t),c=path.join(n,t);checkPaths$1(o,c,(t,a)=>{if(t)return s(t);startCopy$1(a,o,c,i,t=>t?s(t):copyDirItems(e,r,n,i,s))})}function onLink$1(e,t,r,n,i){gracefulFs.readlink(t,(t,s)=>t?i(t):(n.dereference&&(s=path.resolve(process.cwd(),s)),e===notExist$1?gracefulFs.symlink(s,r,i):void gracefulFs.readlink(r,(t,o)=>t?"EINVAL"===t.code||"UNKNOWN"===t.code?gracefulFs.symlink(s,r,i):i(t):(n.dereference&&(o=path.resolve(process.cwd(),o)),isSrcSubdir$1(s,o)?i(Error(`Cannot copy '${s}' to a subdirectory of itself, '${o}'.`)):e.isDirectory()&&isSrcSubdir$1(o,s)?i(Error(`Cannot overwrite '${o}' with '${s}'.`)):copyLink$1(s,r,i)))))}function copyLink$1(e,t,r){gracefulFs.unlink(t,n=>n?r(n):gracefulFs.symlink(e,t,r))}function isSrcSubdir$1(e,t){const r=path.resolve(e).split(path.sep),n=path.resolve(t).split(path.sep);return r.reduce((e,t,r)=>e&&n[r]===t,!0)}function checkStats$1(e,t,r){gracefulFs.stat(e,(e,n)=>{if(e)return r(e);gracefulFs.stat(t,(e,t)=>e?"ENOENT"===e.code?r(null,{srcStat:n,destStat:notExist$1}):r(e):r(null,{srcStat:n,destStat:t}))})}function checkPaths$1(e,t,r){checkStats$1(e,t,(n,i)=>{if(n)return r(n);const{srcStat:s,destStat:o}=i;return o.ino&&o.ino===s.ino?r(Error("Source and destination must not be the same.")):s.isDirectory()&&isSrcSubdir$1(e,t)?r(Error(`Cannot copy '${e}' to a subdirectory of itself, '${t}'.`)):r(null,o)})}var copy_1=copy;const u$2=universalify.fromCallback;var copy$1={copy:u$2(copy_1)};const isWindows="win32"===process.platform;function defaults(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(t=>{e[t]=e[t]||gracefulFs[t],e[t+="Sync"]=e[t]||gracefulFs[t]}),e.maxBusyTries=e.maxBusyTries||3}function rimraf(e,t,r){let n=0;"function"==typeof t&&(r=t,t={}),assert(e,"rimraf: missing path"),assert.strictEqual(typeof e,"string","rimraf: path should be a string"),assert.strictEqual(typeof r,"function","rimraf: callback function required"),assert(t,"rimraf: invalid options argument provided"),assert.strictEqual(typeof t,"object","rimraf: options should be object"),defaults(t),rimraf_(e,t,function i(s){if(s){if(("EBUSY"===s.code||"ENOTEMPTY"===s.code||"EPERM"===s.code)&&t.maxBusyTries>n){return setTimeout(()=>rimraf_(e,t,i),100*++n)}"ENOENT"===s.code&&(s=null)}r(s)})}function rimraf_(e,t,r){assert(e),assert(t),assert("function"==typeof r),t.lstat(e,(n,i)=>n&&"ENOENT"===n.code?r(null):n&&"EPERM"===n.code&&isWindows?fixWinEPERM(e,t,n,r):i&&i.isDirectory()?rmdir(e,t,n,r):void t.unlink(e,n=>{if(n){if("ENOENT"===n.code)return r(null);if("EPERM"===n.code)return isWindows?fixWinEPERM(e,t,n,r):rmdir(e,t,n,r);if("EISDIR"===n.code)return rmdir(e,t,n,r)}return r(n)}))}function fixWinEPERM(e,t,r,n){assert(e),assert(t),assert("function"==typeof n),r&&assert(r instanceof Error),t.chmod(e,438,i=>{i?n("ENOENT"===i.code?null:r):t.stat(e,(i,s)=>{i?n("ENOENT"===i.code?null:r):s.isDirectory()?rmdir(e,t,r,n):t.unlink(e,n)})})}function fixWinEPERMSync(e,t,r){let n;assert(e),assert(t),r&&assert(r instanceof Error);try{t.chmodSync(e,438)}catch(e){if("ENOENT"===e.code)return;throw r}try{n=t.statSync(e)}catch(e){if("ENOENT"===e.code)return;throw r}n.isDirectory()?rmdirSync(e,t,r):t.unlinkSync(e)}function rmdir(e,t,r,n){assert(e),assert(t),r&&assert(r instanceof Error),assert("function"==typeof n),t.rmdir(e,i=>{!i||"ENOTEMPTY"!==i.code&&"EEXIST"!==i.code&&"EPERM"!==i.code?n(i&&"ENOTDIR"===i.code?r:i):rmkids(e,t,n)})}function rmkids(e,t,r){assert(e),assert(t),assert("function"==typeof r),t.readdir(e,(n,i)=>{if(n)return r(n);let s,o=i.length;if(0===o)return t.rmdir(e,r);i.forEach(n=>{rimraf(path.join(e,n),t,n=>{if(!s)return n?r(s=n):void(0==--o&&t.rmdir(e,r))})})})}function rimrafSync(e,t){let r;defaults(t=t||{}),assert(e,"rimraf: missing path"),assert.strictEqual(typeof e,"string","rimraf: path should be a string"),assert(t,"rimraf: missing options"),assert.strictEqual(typeof t,"object","rimraf: options should be object");try{r=t.lstatSync(e)}catch(r){if("ENOENT"===r.code)return;"EPERM"===r.code&&isWindows&&fixWinEPERMSync(e,t,r)}try{r&&r.isDirectory()?rmdirSync(e,t,null):t.unlinkSync(e)}catch(r){if("ENOENT"===r.code)return;if("EPERM"===r.code)return isWindows?fixWinEPERMSync(e,t,r):rmdirSync(e,t,r);if("EISDIR"!==r.code)throw r;rmdirSync(e,t,r)}}function rmdirSync(e,t,r){assert(e),assert(t),r&&assert(r instanceof Error);try{t.rmdirSync(e)}catch(n){if("ENOTDIR"===n.code)throw r;if("ENOTEMPTY"===n.code||"EEXIST"===n.code||"EPERM"===n.code)rmkidsSync(e,t);else if("ENOENT"!==n.code)throw n}}function rmkidsSync(e,t){if(assert(e),assert(t),t.readdirSync(e).forEach(r=>rimrafSync(path.join(e,r),t)),!isWindows){return t.rmdirSync(e,t)}{const r=Date.now();do{try{return t.rmdirSync(e,t)}catch(e){}}while(500>Date.now()-r)}}var rimraf_1=rimraf;rimraf.sync=rimrafSync;const u$3=universalify.fromCallback;var remove={remove:u$3(rimraf_1),removeSync:rimraf_1.sync};const u$4=universalify.fromCallback,emptyDir=u$4(function(e,t){t=t||function(){},fs.readdir(e,(r,n)=>{if(r)return mkdirs_1$1.mkdirs(e,t);n=n.map(t=>path.join(e,t)),function e(){const r=n.pop();if(!r)return t();remove.remove(r,r=>{if(r)return t(r);e()})}()})});function emptyDirSync(e){let t;try{t=fs.readdirSync(e)}catch(t){return mkdirs_1$1.mkdirsSync(e)}t.forEach(t=>{t=path.join(e,t),remove.removeSync(t)})}var empty={emptyDirSync:emptyDirSync,emptydirSync:emptyDirSync,emptyDir:emptyDir,emptydir:emptyDir};const u$5=universalify.fromCallback,pathExists$2=pathExists_1.pathExists;function createFile(e,t){function r(){gracefulFs.writeFile(e,"",e=>{if(e)return t(e);t()})}gracefulFs.stat(e,(n,i)=>{if(!n&&i.isFile())return t();const s=path.dirname(e);pathExists$2(s,(e,n)=>e?t(e):n?r():void mkdirs_1$1.mkdirs(s,e=>{if(e)return t(e);r()}))})}function createFileSync(e){let t;try{t=gracefulFs.statSync(e)}catch(e){}if(t&&t.isFile())return;const r=path.dirname(e);gracefulFs.existsSync(r)||mkdirs_1$1.mkdirsSync(r),gracefulFs.writeFileSync(e,"")}var file={createFile:u$5(createFile),createFileSync:createFileSync};const u$6=universalify.fromCallback,pathExists$3=pathExists_1.pathExists;function createLink(e,t,r){function n(e,t){gracefulFs.link(e,t,e=>{if(e)return r(e);r(null)})}pathExists$3(t,(i,s)=>i?r(i):s?r(null):void gracefulFs.lstat(e,i=>{if(i)return i.message=i.message.replace("lstat","ensureLink"),r(i);const s=path.dirname(t);pathExists$3(s,(i,o)=>i?r(i):o?n(e,t):void mkdirs_1$1.mkdirs(s,i=>{if(i)return r(i);n(e,t)}))}))}function createLinkSync(e,t){if(gracefulFs.existsSync(t))return;try{gracefulFs.lstatSync(e)}catch(e){throw e.message=e.message.replace("lstat","ensureLink"),e}const r=path.dirname(t);return gracefulFs.existsSync(r)?gracefulFs.linkSync(e,t):(mkdirs_1$1.mkdirsSync(r),gracefulFs.linkSync(e,t))}var link={createLink:u$6(createLink),createLinkSync:createLinkSync};const pathExists$4=pathExists_1.pathExists;function symlinkPaths(e,t,r){if(path.isAbsolute(e))return gracefulFs.lstat(e,t=>t?(t.message=t.message.replace("lstat","ensureSymlink"),r(t)):r(null,{toCwd:e,toDst:e}));{const n=path.dirname(t),i=path.join(n,e);return pathExists$4(i,(t,s)=>t?r(t):s?r(null,{toCwd:i,toDst:e}):gracefulFs.lstat(e,t=>t?(t.message=t.message.replace("lstat","ensureSymlink"),r(t)):r(null,{toCwd:e,toDst:path.relative(n,e)})))}}function symlinkPathsSync(e,t){let r;if(path.isAbsolute(e)){if(!(r=gracefulFs.existsSync(e)))throw Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}{const n=path.dirname(t),i=path.join(n,e);if(r=gracefulFs.existsSync(i))return{toCwd:i,toDst:e};if(!(r=gracefulFs.existsSync(e)))throw Error("relative srcpath does not exist");return{toCwd:e,toDst:path.relative(n,e)}}}var symlinkPaths_1={symlinkPaths:symlinkPaths,symlinkPathsSync:symlinkPathsSync};function symlinkType(e,t,r){if(r="function"==typeof t?t:r,t="function"!=typeof t&&t)return r(null,t);gracefulFs.lstat(e,(e,n)=>{if(e)return r(null,"file");t=n&&n.isDirectory()?"dir":"file",r(null,t)})}function symlinkTypeSync(e,t){let r;if(t)return t;try{r=gracefulFs.lstatSync(e)}catch(e){return"file"}return r&&r.isDirectory()?"dir":"file"}var symlinkType_1={symlinkType:symlinkType,symlinkTypeSync:symlinkTypeSync};const u$7=universalify.fromCallback,mkdirs$2=mkdirs_1$1.mkdirs,mkdirsSync$1=mkdirs_1$1.mkdirsSync,symlinkPaths$1=symlinkPaths_1.symlinkPaths,symlinkPathsSync$1=symlinkPaths_1.symlinkPathsSync,symlinkType$1=symlinkType_1.symlinkType,symlinkTypeSync$1=symlinkType_1.symlinkTypeSync,pathExists$5=pathExists_1.pathExists;function createSymlink(e,t,r,n){n="function"==typeof r?r:n,r="function"!=typeof r&&r,pathExists$5(t,(i,s)=>i?n(i):s?n(null):void symlinkPaths$1(e,t,(i,s)=>{if(i)return n(i);e=s.toDst,symlinkType$1(s.toCwd,r,(r,i)=>{if(r)return n(r);const s=path.dirname(t);pathExists$5(s,(r,o)=>r?n(r):o?gracefulFs.symlink(e,t,i,n):void mkdirs$2(s,r=>{if(r)return n(r);gracefulFs.symlink(e,t,i,n)}))})}))}function createSymlinkSync(e,t,r){if(gracefulFs.existsSync(t))return;const n=symlinkPathsSync$1(e,t);e=n.toDst,r=symlinkTypeSync$1(n.toCwd,r);const i=path.dirname(t);return gracefulFs.existsSync(i)?gracefulFs.symlinkSync(e,t,r):(mkdirsSync$1(i),gracefulFs.symlinkSync(e,t,r))}var _fs,symlink={createSymlink:u$7(createSymlink),createSymlinkSync:createSymlinkSync},ensure={createFile:file.createFile,createFileSync:file.createFileSync,ensureFile:file.createFile,ensureFileSync:file.createFileSync,createLink:link.createLink,createLinkSync:link.createLinkSync,ensureLink:link.createLink,ensureLinkSync:link.createLinkSync,createSymlink:symlink.createSymlink,createSymlinkSync:symlink.createSymlinkSync,ensureSymlink:symlink.createSymlink,ensureSymlinkSync:symlink.createSymlinkSync};try{_fs=gracefulFs}catch(e){_fs=fs}function readFile(e,t,r){null==r&&(r=t,t={}),"string"==typeof t&&(t={encoding:t});var n=!0;"throws"in(t=t||{})&&(n=t.throws),(t.fs||_fs).readFile(e,t,function(i,s){if(i)return r(i);var o;s=stripBom(s);try{o=JSON.parse(s,t?t.reviver:null)}catch(t){return n?(t.message=e+": "+t.message,r(t)):r(null,null)}r(null,o)})}function readFileSync(e,t){"string"==typeof(t=t||{})&&(t={encoding:t});var r=t.fs||_fs,n=!0;"throws"in t&&(n=t.throws);try{var i=r.readFileSync(e,t);return i=stripBom(i),JSON.parse(i,t.reviver)}catch(t){if(n)throw t.message=e+": "+t.message,t;return null}}function stringify(e,t){var r,n="\n";return"object"==typeof t&&null!==t&&(t.spaces&&(r=t.spaces),t.EOL&&(n=t.EOL)),JSON.stringify(e,t?t.replacer:null,r).replace(/\n/g,n)+n}function writeFile(e,t,r,n){null==n&&(n=r,r={});var i=(r=r||{}).fs||_fs,s="";try{s=stringify(t,r)}catch(e){return void(n&&n(e,null))}i.writeFile(e,s,r,n)}function writeFileSync(e,t,r){var n=(r=r||{}).fs||_fs,i=stringify(t,r);return n.writeFileSync(e,i,r)}function stripBom(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e=e.replace(/^\uFEFF/,"")}var jsonfile={readFile:readFile,readFileSync:readFileSync,writeFile:writeFile,writeFileSync:writeFileSync},jsonfile_1=jsonfile;const u$8=universalify.fromCallback;var jsonfile$1={readJson:u$8(jsonfile_1.readFile),readJsonSync:jsonfile_1.readFileSync,writeJson:u$8(jsonfile_1.writeFile),writeJsonSync:jsonfile_1.writeFileSync};const pathExists$6=pathExists_1.pathExists;function outputJson(e,t,r,n){"function"==typeof r&&(n=r,r={});const i=path.dirname(e);pathExists$6(i,(s,o)=>s?n(s):o?jsonfile$1.writeJson(e,t,r,n):void mkdirs_1$1.mkdirs(i,i=>{if(i)return n(i);jsonfile$1.writeJson(e,t,r,n)}))}var outputJson_1=outputJson;function outputJsonSync(e,t,r){const n=path.dirname(e);gracefulFs.existsSync(n)||mkdirs_1$1.mkdirsSync(n),jsonfile$1.writeJsonSync(e,t,r)}var outputJsonSync_1=outputJsonSync;const u$9=universalify.fromCallback;jsonfile$1.outputJson=u$9(outputJson_1),jsonfile$1.outputJsonSync=outputJsonSync_1,jsonfile$1.outputJSON=jsonfile$1.outputJson,jsonfile$1.outputJSONSync=jsonfile$1.outputJsonSync,jsonfile$1.writeJSON=jsonfile$1.writeJson,jsonfile$1.writeJSONSync=jsonfile$1.writeJsonSync,jsonfile$1.readJSON=jsonfile$1.readJson,jsonfile$1.readJSONSync=jsonfile$1.readJsonSync;var json=jsonfile$1;const copySync$2=copySync$1.copySync,removeSync=remove.removeSync,mkdirpSync$1=mkdirs_1$1.mkdirsSync;function moveSync(e,t,r){const n=(r=r||{}).overwrite||r.clobber||!1;if(e=path.resolve(e),t=path.resolve(t),e===t)return gracefulFs.accessSync(e);if(isSrcSubdir$2(e,t))throw Error(`Cannot move '${e}' into itself '${t}'.`);mkdirpSync$1(path.dirname(t)),function(){if(n)try{gracefulFs.renameSync(e,t)}catch(i){if("ENOTEMPTY"===i.code||"EEXIST"===i.code||"EPERM"===i.code)return removeSync(t),r.overwrite=!1,moveSync(e,t,r);if("EXDEV"!==i.code)throw i;return moveSyncAcrossDevice(e,t,n)}else try{gracefulFs.linkSync(e,t),gracefulFs.unlinkSync(e)}catch(r){if("EXDEV"===r.code||"EISDIR"===r.code||"EPERM"===r.code||"ENOTSUP"===r.code)return moveSyncAcrossDevice(e,t,n);throw r}}()}function moveSyncAcrossDevice(e,t,r){return gracefulFs.statSync(e).isDirectory()?moveDirSyncAcrossDevice(e,t,r):moveFileSyncAcrossDevice(e,t,r)}function moveFileSyncAcrossDevice(e,t,r){const n=buffer(65536),i=r?"w":"wx",s=gracefulFs.openSync(e,"r"),o=gracefulFs.fstatSync(s),c=gracefulFs.openSync(t,i,o.mode);let a=0;for(;o.size>a;){const e=gracefulFs.readSync(s,n,0,65536,a);gracefulFs.writeSync(c,n,0,e),a+=e}return gracefulFs.closeSync(s),gracefulFs.closeSync(c),gracefulFs.unlinkSync(e)}function moveDirSyncAcrossDevice(e,t,r){const n={overwrite:!1};function i(){return copySync$2(e,t,n),removeSync(e)}r?(removeSync(t),i()):i()}function isSrcSubdir$2(e,t){try{return gracefulFs.statSync(e).isDirectory()&&e!==t&&t.indexOf(e)>-1&&t.split(path.dirname(e)+path.sep)[1].split(path.sep)[0]===path.basename(e)}catch(e){return!1}}var moveSync_1={moveSync:moveSync};const u$a=universalify.fromCallback,copy$2=copy$1.copy,remove$1=remove.remove,mkdirp$1=mkdirs_1$1.mkdirp,pathExists$7=pathExists_1.pathExists;function move(e,t,r,n){"function"==typeof r&&(n=r,r={});const i=r.overwrite||r.clobber||!1;if(e=path.resolve(e),t=path.resolve(t),e===t)return gracefulFs.access(e,n);gracefulFs.stat(e,(r,s)=>r?n(r):s.isDirectory()&&isSrcSubdir$3(e,t)?n(Error(`Cannot move '${e}' to a subdirectory of itself, '${t}'.`)):void mkdirp$1(path.dirname(t),r=>r?n(r):doRename(e,t,i,n)))}function doRename(e,t,r,n){if(r)return remove$1(t,i=>i?n(i):rename(e,t,r,n));pathExists$7(t,(i,s)=>i?n(i):s?n(Error("dest already exists.")):rename(e,t,r,n))}function rename(e,t,r,n){gracefulFs.rename(e,t,i=>i?"EXDEV"!==i.code?n(i):moveAcrossDevice(e,t,r,n):n())}function moveAcrossDevice(e,t,r,n){copy$2(e,t,{overwrite:r,errorOnExist:!0},t=>t?n(t):remove$1(e,n))}function isSrcSubdir$3(e,t){const r=e.split(path.sep),n=t.split(path.sep);return r.reduce((e,t,r)=>e&&n[r]===t,!0)}var move_1={move:u$a(move)};const u$b=universalify.fromCallback,pathExists$8=pathExists_1.pathExists;function outputFile(e,t,r,n){"function"==typeof r&&(n=r,r="utf8");const i=path.dirname(e);pathExists$8(i,(s,o)=>s?n(s):o?gracefulFs.writeFile(e,t,r,n):void mkdirs_1$1.mkdirs(i,i=>{if(i)return n(i);gracefulFs.writeFile(e,t,r,n)}))}function outputFileSync(e,...t){const r=path.dirname(e);if(gracefulFs.existsSync(r))return gracefulFs.writeFileSync(e,...t);mkdirs_1$1.mkdirsSync(r),gracefulFs.writeFileSync(e,...t)}var output={outputFile:u$b(outputFile),outputFileSync:outputFileSync},lib=createCommonjsModule(function(e){e.exports=Object.assign({},fs_1$1,copySync$1,copy$1,empty,ensure,json,mkdirs_1$1,moveSync_1,move_1,output,pathExists_1,remove),Object.getOwnPropertyDescriptor(fs,"promises")&&Object.defineProperty(e.exports,"promises",{get:()=>fs.promises})});function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var classCallCheck=_classCallCheck;function _defineProperties(e,t){for(var r=0;t.length>r;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}var createClass=_createClass,Generator=function(){function e(){classCallCheck(this,e)}return createClass(e,null,[{key:"generate",value:function(e,t){return"\n    const { Client } = require('@rlay/rlay-client-lib');\n    const map = new Map();\n\n    const getClient = (config) => {\n      const stringConfig = JSON.stringify(config);\n      if (map.has(stringConfig)) {\n        return map.get(stringConfig);\n      } else {\n        const client = new Client(config);\n        const schemaCIDs = ".concat(e,";\n        const schema = ").concat(t,";\n\n        client.initSchema(schemaCIDs, schema);\n        client.initClient();\n\n        map.set(stringConfig, client);\n        return getClient(config);\n      }\n    }\n\n    const t = getClient({});\n    t.getClient = getClient;\n\n    module.exports = t;")}}]),e}(),_typeof_1=createCommonjsModule(function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(n){return e.exports=r="function"==typeof Symbol&&"symbol"===t(Symbol.iterator)?function(e){return t(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":t(e)},r(n)}e.exports=r});function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var assertThisInitialized=_assertThisInitialized;function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof_1(t)&&"function"!=typeof t?assertThisInitialized(e):t}var possibleConstructorReturn=_possibleConstructorReturn,getPrototypeOf=createCommonjsModule(function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(r)}e.exports=t}),setPrototypeOf=createCommonjsModule(function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(r,n)}e.exports=t});function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&setPrototypeOf(e,t)}var inherits=_inherits;function _isNativeFunction(e){return-1!==Function.toString.call(e).indexOf("[native code]")}var isNativeFunction=_isNativeFunction,construct=createCommonjsModule(function(e){function t(r,n,i){return e.exports=t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&setPrototypeOf(i,r.prototype),i},t.apply(null,arguments)}e.exports=t}),wrapNativeSuper=createCommonjsModule(function(e){function t(r){var n="function"==typeof Map?new Map:void 0;return e.exports=t=function(e){if(null===e||!isNativeFunction(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return construct(e,arguments,getPrototypeOf(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),setPrototypeOf(t,e)},t(r)}e.exports=t}),ontology=require("@rlay/ontology"),debug=require("debug")("rlay-seed:utils"),isSpecialField=function(e,t){return"type"===t||("value"===t&&"Annotation"===e.type||"target"===t&&("DataPropertyAssertion"===e.type||"NegativeDataPropertyAssertion"===e.type))},calculateEntityTreeReferences=function(e){var t={},r={},n=function(e){var t=!1;return Object.keys(e).forEach(function(r){if(!isSpecialField(e,r)){var n=e[r];Array.isArray(n)?n.forEach(function(e,r){e.startsWith("*")&&(t=!0)}):n.startsWith("*")&&(t=!0)}}),t},i=function(e,r){var i=r;if(i.startsWith("*")&&(i=val.replace("*","")),t[i])return t[i];var o=e[i];if(!o)throw new ReferenceNameNotFoundError("Reference *".concat(i," was not found."));if("string"==typeof o&&o.startsWith("0x"))return o;if(!n(o)){var c=ontology.getEntityCid(o);return t[i]=c,c}var a=s(e,o);debug("calculateEntityCid -> getEntityCid",a);var u=ontology.getEntityCid(a);return t[i]=u,u},s=function(e,t){var r=Object.assign({},t);return Object.keys(r).forEach(function(t){if(!isSpecialField(r,t)){var n=r[t];if(Array.isArray(n))n.forEach(function(n,s){var o=n.replace("*","");n.startsWith("*")&&(r[t][s]=i(e,o))});else if(n.startsWith("*")){var s=n.replace("*","");r[t]=i(e,s)}}}),r};return Object.keys(e).forEach(function(t){var i=e[t];r[t]=n(i)?s(e,i):i}),r},resolveEntityReferences=function(e,t){var r=Object.assign({},e);return Object.keys(r).forEach(function(e){if(!isSpecialField(r,e)){var n=r[e];Array.isArray(n)?n.forEach(function(n,i){n.startsWith("*")&&(r[e][i]=t[n.substring(1)])}):n.startsWith("*")&&(r[e]=t[n.substring(1)])}}),r},resolveEntityTreeReferences=function(e,t){var r={};return Object.keys(e).forEach(function(n){var i=resolveEntityReferences(e[n],t);r[n]=i}),r},ReferenceNameNotFoundError=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,getPrototypeOf(t).apply(this,arguments))}return inherits(t,e),t}(wrapNativeSuper(Error)),rlay=require("@rlay/web3-rlay"),mapValues=require("lodash.mapvalues"),ontology$1=require("@rlay/ontology"),seedFromFile=function(e,t){var r=t.imports,n=mapValues(e,function(e){var t=Object.assign({},e);return Object.keys(t).forEach(function(e){isSpecialField(t,e)&&function(e,t){"type"!==t&&("value"!==t||"Annotation"!==e.type?"target"!==t||"DataPropertyAssertion"!==e.type&&"NegativeDataPropertyAssertion"!==e.type||(e.target=rlay.encodeValue(e.target)):e.value=rlay.encodeValue(e.value))}(t,e)}),t}),i=calculateEntityTreeReferences(Object.assign({},r,n)),s={};return Object.keys(i).forEach(function(e){var t=i[e];if("string"==typeof t&&t.startsWith("0x"))s[e]=t;else{var r=ontology$1.getEntityCid(t);s[e]=r}}),resolveEntityTreeReferences(n,s)},isNonAssertiveSchemaEntity=function(e){return["Class","DataProperty","ObjectProperty"].includes(e.type)},getFilePath=function(e){var t=path.join(process.cwd(),e);return path.isAbsolute(e)&&(t=e),t},getFileRequired=function(e){if(!lib.existsSync(seedFilePath))throw Error("".concat(seedFilePath," does not exist"));return require(e)},program=require("yargs").env().option("seed-file-output",{describe:"path to the file that contains the output of the rlay-seed command"}).option("seed-file",{describe:"path to the file that served as input for the rlay-seed command"}).option("output",{describe:"path to the file where the generated rlay client should be written to"}).default("seed-file-output","./generated/seed.json").default("seed-file","./seed.js").default("output","./generated/rlay-client/index.js").argv,seedFilePath=getFilePath(program.seedFile),seedFile=getFileRequired(seedFilePath);if(!seedFile.entities)throw Error("{seedFilePath} is not a valid Rlay seed file. Root object must have '.entities' property.");var seedFileOutputPath=getFilePath(program.seedFileOutput),seededSchema=getFileRequired(seedFileOutputPath),seedFileEntities=seedFromFile(seedFile.entities,seedFile),entities=Object.keys(seedFileEntities).map(function(e){return{key:e,assertion:seedFile.entities[e]}}).filter(function(e){return isNonAssertiveSchemaEntity(e.assertion)}),source=Generator.generate(JSON.stringify(seededSchema),JSON.stringify(entities)),clientPathSplit=program.output.split("/"),clientPathFile="./"+clientPathSplit.pop(),clientPathDir=clientPathSplit.join("/")+"/",generatedDir=getFilePath(clientPathDir),generatedFile=path.join(generatedDir,clientPathFile);lib.ensureDirSync(generatedDir),lib.writeFileSync(generatedFile,source,"utf8");
